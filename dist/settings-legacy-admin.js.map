{"version":3,"file":"settings-legacy-admin.js?v=dfd25573292229de4f1d","mappings":"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","sources":["webpack:///nextcloud/apps/settings/src/admin.js","webpack:///nextcloud/webpack/startup"],"sourcesContent":["window.addEventListener('DOMContentLoaded', () => {\n\t$('#excludedGroups,#linksExcludedGroups,#passwordsExcludedGroups').each(function(index, element) {\n\t\tOC.Settings.setupGroupsSelect($(element))\n\t\t$(element).change((ev) => {\n\t\t\tlet groups = ev.val || []\n\t\t\tgroups = JSON.stringify(groups)\n\t\t\tOCP.AppConfig.setValue('core', $(this).attr('name'), groups)\n\t\t})\n\t})\n\n\t$('#loglevel').change(() => {\n\t\t$.post(OC.generateUrl('/settings/admin/log/level'), { level: $(this).val() }, () => {\n\t\t\tOC.Log.reload()\n\t\t})\n\t})\n\n\t$('#backgroundjobs span.crondate').tooltip({ placement: 'top' })\n\n\t$('#backgroundjobs input').change(function() {\n\t\tif ($(this).is(':checked')) {\n\t\t\tconst mode = $(this).val()\n\t\t\tif (mode === 'ajax' || mode === 'webcron' || mode === 'cron') {\n\t\t\t\tOCP.AppConfig.setValue('core', 'backgroundjobs_mode', mode, {\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t// clear cron errors on background job mode change\n\t\t\t\t\t\tOCP.AppConfig.deleteKey('core', 'cronErrors')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t})\n\n\t$('#shareAPIEnabled').change(() => {\n\t\t$('#shareAPI p:not(#enable)').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#enableEncryption').change(() => {\n\t\t$('#encryptionAPI div#EncryptionWarning').toggleClass('hidden')\n\t})\n\n\t$('#reallyEnableEncryption').click(() => {\n\t\t$('#encryptionAPI div#EncryptionWarning').toggleClass('hidden')\n\t\t$('#encryptionAPI div#EncryptionSettingsArea').toggleClass('hidden')\n\t\tOCP.AppConfig.setValue('core', 'encryption_enabled', 'yes')\n\t\t$('#enableEncryption').attr('disabled', 'disabled')\n\t})\n\n\t$('#startmigration').click((event) => {\n\t\t$(window).on('beforeunload.encryption', (e) => {\n\t\t\treturn t('settings', 'Migration in progress. Please wait until the migration is finished')\n\t\t})\n\t\tevent.preventDefault()\n\t\t$('#startmigration').prop('disabled', true)\n\t\tOC.msg.startAction('#startmigration_msg', t('settings', 'Migration started â€¦'))\n\t\t$.post(OC.generateUrl('/settings/admin/startmigration'), '', function(data) {\n\t\t\tOC.msg.finishedAction('#startmigration_msg', data)\n\t\t\tif (data.status === 'success') {\n\t\t\t\t$('#encryptionAPI div#selectEncryptionModules').toggleClass('hidden')\n\t\t\t\t$('#encryptionAPI div#migrationWarning').toggleClass('hidden')\n\t\t\t} else {\n\t\t\t\t$('#startmigration').prop('disabled', false)\n\t\t\t}\n\t\t\t$(window).off('beforeunload.encryption')\n\n\t\t})\n\t})\n\n\t$('#shareapiExpireAfterNDays').on('input', function() {\n\t\tthis.value = this.value.replace(/\\D/g, '')\n\t})\n\n\t$('#shareAPI input:not(.noJSAutoUpdate)').change(function() {\n\t\tlet value = $(this).val()\n\t\tif ($(this).attr('type') === 'checkbox') {\n\t\t\tif (this.checked) {\n\t\t\t\tvalue = 'yes'\n\t\t\t} else {\n\t\t\t\tvalue = 'no'\n\t\t\t}\n\t\t}\n\t\tOCP.AppConfig.setValue('core', $(this).attr('name'), value)\n\t})\n\n\t$('#shareapiDefaultExpireDate').change(function() {\n\t\t$('#setDefaultExpireDate').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#shareapiDefaultInternalExpireDate').change(function() {\n\t\t$('#setDefaultInternalExpireDate').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#shareapiDefaultRemoteExpireDate').change(function() {\n\t\t$('#setDefaultRemoteExpireDate').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#enforceLinkPassword').change(function() {\n\t\t$('#selectPasswordsExcludedGroups').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#publicShareDisclaimer').change(function() {\n\t\t$('#publicShareDisclaimerText').toggleClass('hidden', !this.checked)\n\t\tif (!this.checked) {\n\t\t\tsavePublicShareDisclaimerText('')\n\t\t}\n\t})\n\n\t$('#shareApiDefaultPermissionsSection input').change(function(ev) {\n\t\tconst $el = $('#shareApiDefaultPermissions')\n\t\tconst $target = $(ev.target)\n\n\t\tlet value = $el.val()\n\t\tif ($target.is(':checked')) {\n\t\t\tvalue = value | $target.val()\n\t\t} else {\n\t\t\tvalue = value & ~$target.val()\n\t\t}\n\n\t\t// always set read permission\n\t\tvalue |= OC.PERMISSION_READ\n\n\t\t// this will trigger the field's change event and will save it\n\t\t$el.val(value).change()\n\n\t\tev.preventDefault()\n\n\t\treturn false\n\t})\n\n\tconst savePublicShareDisclaimerText = _.debounce(function(value) {\n\t\tconst options = {\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#publicShareDisclaimerStatus', t('settings', 'Saved'))\n\t\t\t},\n\t\t\terror: () => {\n\t\t\t\tOC.msg.finishedError('#publicShareDisclaimerStatus', t('settings', 'Not saved'))\n\t\t\t}\n\t\t}\n\n\t\tOC.msg.startSaving('#publicShareDisclaimerStatus')\n\t\tif (_.isString(value) && value !== '') {\n\t\t\tOCP.AppConfig.setValue('core', 'shareapi_public_link_disclaimertext', value, options)\n\t\t} else {\n\t\t\t$('#publicShareDisclaimerText').val('')\n\t\t\tOCP.AppConfig.deleteKey('core', 'shareapi_public_link_disclaimertext', options)\n\t\t}\n\t}, 500)\n\n\t$('#publicShareDisclaimerText').on('change, keyup', function() {\n\t\tsavePublicShareDisclaimerText(this.value)\n\t})\n\n\t$('#shareapi_allow_share_dialog_user_enumeration').on('change', function() {\n\t\t$('#shareapi_restrict_user_enumeration_to_group_setting').toggleClass('hidden', !this.checked)\n\t\t$('#shareapi_restrict_user_enumeration_to_phone_setting').toggleClass('hidden', !this.checked)\n\t\t$('#shareapi_restrict_user_enumeration_combinewarning_setting').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#allowLinks').change(function() {\n\t\t$('#publicLinkSettings').toggleClass('hidden', !this.checked)\n\t\t$('#setDefaultExpireDate').toggleClass('hidden', !(this.checked && $('#shareapiDefaultExpireDate')[0].checked))\n\t})\n\n\t$('#mail_smtpauth').change(function() {\n\t\tif (!this.checked) {\n\t\t\t$('#mail_credentials').addClass('hidden')\n\t\t} else {\n\t\t\t$('#mail_credentials').removeClass('hidden')\n\t\t}\n\t})\n\n\t$('#mail_smtpmode').change(function() {\n\t\tif ($(this).val() !== 'smtp') {\n\t\t\t$('#setting_smtpauth').addClass('hidden')\n\t\t\t$('#setting_smtphost').addClass('hidden')\n\t\t\t$('#mail_smtpsecure_label').addClass('hidden')\n\t\t\t$('#mail_smtpsecure').addClass('hidden')\n\t\t\t$('#mail_credentials').addClass('hidden')\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').removeClass('hidden')\n\t\t} else {\n\t\t\t$('#setting_smtpauth').removeClass('hidden')\n\t\t\t$('#setting_smtphost').removeClass('hidden')\n\t\t\t$('#mail_smtpsecure_label').removeClass('hidden')\n\t\t\t$('#mail_smtpsecure').removeClass('hidden')\n\t\t\tif ($('#mail_smtpauth').is(':checked')) {\n\t\t\t\t$('#mail_credentials').removeClass('hidden')\n\t\t\t}\n\t\t\t$('#mail_sendmailmode_label, #mail_sendmailmode').addClass('hidden')\n\t\t}\n\t})\n\n\tconst changeEmailSettings = function() {\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(changeEmailSettings)\n\t\t\treturn\n\t\t}\n\n\t\tOC.msg.startSaving('#mail_settings_msg')\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings'),\n\t\t\ttype: 'POST',\n\t\t\tdata: $('#mail_general_settings_form').serialize(),\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\n\t\t\t}\n\t\t})\n\t}\n\n\tconst toggleEmailCredentials = function() {\n\t\tif (OC.PasswordConfirmation.requiresPasswordConfirmation()) {\n\t\t\tOC.PasswordConfirmation.requirePasswordConfirmation(toggleEmailCredentials)\n\t\t\treturn\n\t\t}\n\n\t\tOC.msg.startSaving('#mail_settings_msg')\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailsettings/credentials'),\n\t\t\ttype: 'POST',\n\t\t\tdata: $('#mail_credentials_settings').serialize(),\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#mail_settings_msg', t('settings', 'Saved'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#mail_settings_msg', xhr.responseJSON)\n\t\t\t}\n\t\t})\n\t}\n\n\t$('#mail_general_settings_form').change(changeEmailSettings)\n\t$('#mail_credentials_settings_submit').click(toggleEmailCredentials)\n\t$('#mail_smtppassword').click(() => {\n\t\tif (this.type === 'text' && this.value === '********') {\n\t\t\tthis.type = 'password'\n\t\t\tthis.value = ''\n\t\t}\n\t})\n\n\t$('#sendtestemail').click((event) => {\n\t\tevent.preventDefault()\n\t\tOC.msg.startAction('#sendtestmail_msg', t('settings', 'Sendingâ€¦'))\n\n\t\t$.ajax({\n\t\t\turl: OC.generateUrl('/settings/admin/mailtest'),\n\t\t\ttype: 'POST',\n\t\t\tsuccess: () => {\n\t\t\t\tOC.msg.finishedSuccess('#sendtestmail_msg', t('settings', 'Email sent'))\n\t\t\t},\n\t\t\terror: (xhr) => {\n\t\t\t\tOC.msg.finishedError('#sendtestmail_msg', xhr.responseJSON)\n\t\t\t}\n\t\t})\n\t})\n\n\t$('#allowGroupSharing').change(() => {\n\t\t$('#allowGroupSharing').toggleClass('hidden', !this.checked)\n\t})\n\n\t$('#shareapiExcludeGroups').change(() => {\n\t\t$('#selectExcludedGroups').toggleClass('hidden', !this.checked)\n\t})\n\n\tconst setupChecks = () => {\n\t\t// run setup checks then gather error messages\n\t\t$.when(\n\t\t\tOC.SetupChecks.checkWebDAV(),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/webfinger', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('GET', '/.well-known/nodeinfo', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true, [200, 404], true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/caldav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkWellKnownUrl('PROPFIND', '/.well-known/carddav', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocm-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkProviderUrl(OC.getRootPath() + '/ocs-provider/', OC.theme.docPlaceholderUrl, $('#postsetupchecks').data('check-wellknown') === true),\n\t\t\tOC.SetupChecks.checkSetup(),\n\t\t\tOC.SetupChecks.checkGeneric(),\n\t\t\tOC.SetupChecks.checkWOFF2Loading(OC.filePath('core', '', 'fonts/NotoSans-Regular-latin.woff2'), OC.theme.docPlaceholderUrl),\n\t\t\tOC.SetupChecks.checkDataProtected()\n\t\t).then((check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11) => {\n\t\t\tconst messages = [].concat(check1, check2, check3, check4, check5, check6, check7, check8, check9, check10, check11)\n\t\t\tconst $el = $('#postsetupchecks')\n\t\t\t$('#security-warning-state-loading').addClass('hidden')\n\n\t\t\tlet hasMessages = false\n\t\t\tconst $errorsEl = $el.find('.errors')\n\t\t\tconst $warningsEl = $el.find('.warnings')\n\t\t\tconst $infoEl = $el.find('.info')\n\n\t\t\tfor (let i = 0; i < messages.length; i++) {\n\t\t\t\tswitch (messages[i].type) {\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_INFO:\n\t\t\t\t\t$infoEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t\tbreak\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_WARNING:\n\t\t\t\t\t$warningsEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t\tbreak\n\t\t\t\tcase OC.SetupChecks.MESSAGE_TYPE_ERROR:\n\t\t\t\tdefault:\n\t\t\t\t\t$errorsEl.append('<li>' + messages[i].msg + '</li>')\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($errorsEl.find('li').length > 0) {\n\t\t\t\t$errorsEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\t\t\tif ($warningsEl.find('li').length > 0) {\n\t\t\t\t$warningsEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\t\t\tif ($infoEl.find('li').length > 0) {\n\t\t\t\t$infoEl.removeClass('hidden')\n\t\t\t\thasMessages = true\n\t\t\t}\n\n\t\t\tif (hasMessages) {\n\t\t\t\t$('#postsetupchecks-hint').removeClass('hidden')\n\t\t\t\tif ($errorsEl.find('li').length > 0) {\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\n\t\t\t\t} else {\n\t\t\t\t\t$('#security-warning-state-warning').removeClass('hidden')\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst securityWarning = $('#security-warning')\n\t\t\t\tif (securityWarning.children('ul').children().length === 0) {\n\t\t\t\t\t$('#security-warning-state-ok').removeClass('hidden')\n\t\t\t\t} else {\n\t\t\t\t\t$('#security-warning-state-failure').removeClass('hidden')\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tif (document.getElementById('security-warning') !== null) {\n\t\tsetupChecks()\n\t}\n})\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[39583]();\n"],"names":["window","addEventListener","$","each","index","element","OC","Settings","setupGroupsSelect","change","ev","groups","val","JSON","stringify","OCP","AppConfig","setValue","attr","post","generateUrl","level","Log","reload","tooltip","placement","this","is","mode","success","deleteKey","toggleClass","checked","click","event","on","e","t","preventDefault","prop","msg","startAction","data","finishedAction","status","off","value","replace","savePublicShareDisclaimerText","$el","$target","target","PERMISSION_READ","_","debounce","options","finishedSuccess","error","finishedError","startSaving","isString","removeClass","addClass","changeEmailSettings","PasswordConfirmation","requiresPasswordConfirmation","requirePasswordConfirmation","ajax","url","type","serialize","xhr","responseJSON","toggleEmailCredentials","document","getElementById","when","SetupChecks","checkWebDAV","checkWellKnownUrl","theme","docPlaceholderUrl","checkProviderUrl","getRootPath","checkSetup","checkGeneric","checkWOFF2Loading","filePath","checkDataProtected","then","check1","check2","check3","check4","check5","check6","check7","check8","check9","check10","check11","messages","concat","hasMessages","$errorsEl","find","$warningsEl","$infoEl","i","length","MESSAGE_TYPE_INFO","append","MESSAGE_TYPE_WARNING","MESSAGE_TYPE_ERROR","children"],"sourceRoot":""}
/*! For license information please see src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2.js.LICENSE.txt */
"use strict";(self.webpackChunk_nextcloud_text=self.webpackChunk_nextcloud_text||[]).push([["src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2","data_image_svg_xml_3c_21--_20-_20SPDX-FileCopyrightText_202020_20Google_20Inc_20-_20SPDX-Lice-cc29b1"],{33528:(t,e,n)=>{n.d(e,{TI:()=>s,eS:()=>a,gn:()=>o,kZ:()=>r,qj:()=>l,uT:()=>i});const i=Symbol("state:uploading-state"),o=Symbol("editor:action:attachment-prompt"),a=Symbol("editor:action:upload-attachment"),r={inject:{$uploadingState:{from:i,default:{isUploadingAttachments:!1}}}},s={inject:{$callAttachmentPrompt:{from:o,default:()=>{}}}},l={inject:{$callChooseLocalAttachment:{from:a,default:()=>{}}}}},28612:(t,e,n)=>{n.d(e,{Ad:()=>r,Dr:()=>i,aM:()=>o,vV:()=>a});const i=Symbol("wrapper:outline-state"),o=Symbol("wrapper:outline-actions"),a={inject:{$outlineState:{from:i,default:{visible:!1,enable:!1}}}},r={inject:{$outlineActions:{from:o,default:{toggle:()=>{}}}}}},76115:(t,e,n)=>{n.d(e,{b:()=>w});var i=n(20296),o=n.n(i),a=n(31728),r=n(28612),s=n(72076),l=n(13815),c=n(93379),d=n.n(c),u=n(7795),p=n.n(u),A=n(90569),m=n.n(A),h=n(3565),f=n.n(h),g=n(19216),C=n.n(g),v=n(44589),b=n.n(v),x=n(97646),y={};y.styleTagTransform=b(),y.setAttributes=f(),y.insert=m().bind(null,"head"),y.domAPI=p(),y.insertStyleElement=C();d()(x.Z,y);x.Z&&x.Z.locals&&x.Z.locals;const w={mixins:[a.Cy,a.ww,l.Z,r.Ad,r.vV],props:{actionEntry:{type:Object,required:!0},canBeFocussed:{type:Boolean,default:null}},data(){return{state:(0,s.wr)(this.actionEntry,this.$editor)}},computed:{label(){const{label:t}=this.actionEntry;return"function"==typeof t?t(this):t},icon(){return this.actionEntry.icon},keyshortcuts(){return(0,s.FZ)(this.actionEntry)},tooltip(){return[this.label,(0,s.RR)(this.$isMobile,this.actionEntry)].join(" ")}},watch:{canBeFocussed(){this.setTabIndexOnButton()}},mounted(){this.$_updateState=o()(this.updateState.bind(this),50),this.$editor.on("update",this.$_updateState),this.$editor.on("selectionUpdate",this.$_updateState),this.$emit("disabled",this.state.disabled),this.setTabIndexOnButton()},beforeDestroy(){this.$editor.off("update",this.$_updateState),this.$editor.off("selectionUpdate",this.$_updateState)},methods:{updateState(){this.state=(0,s.wr)(this.actionEntry,this.$editor),this.$emit("disabled",this.state.disabled)},setTabIndexOnButton(){const t="button"===this.$el.tagName.toLowerCase()?this.$el:this.$el.querySelector("button");null===this.canBeFocussed?t.removeAttribute("tabindex"):t.setAttribute("tabindex",this.canBeFocussed?"0":"-1")},focusButton(){("button"===this.$el.tagName.toLowerCase()?this.$el:this.$el.querySelector("button")).focus()}}}},60948:(t,e,n)=>{n.d(e,{V:()=>i,q:()=>o});const i=Symbol("menu::id"),o={inject:{$menuID:{from:i,default:null}},computed:{menuIDSelector(){return`#${this.$menuID}`}}}},17049:(e,n,i)=>{i.d(n,{E:()=>$,Z:()=>D});var o=i(32318),a=i(76115),r=i(10834),s=i(60948);const l={name:"EmojiPickerAction",components:{NcEmojiPicker:r.Xo,NcButton:r.P2},extends:a.b,mixins:[s.q],methods:{addEmoji(t){let{id:e,native:n}=t;this.actionEntry.action(this.$editor.chain(),{id:e,native:n}).focus().run()}}};var c=i(51900);const d=(0,c.Z)(l,(function(){var t=this,e=t._self._c;return e("NcEmojiPicker",{staticClass:"entry-action entry-action__emoji",attrs:{"data-text-action-entry":t.actionEntry.key,container:t.menuIDSelector},on:{"select-data":t.addEmoji}},[e("div",[e("NcButton",{staticClass:"entry-action__button",attrs:{role:"menu",title:t.actionEntry.label,"aria-label":t.actionEntry.label},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component"})]},proxy:!0}])})],1)])}),[],!1,null,null,null).exports;var u=i(31728),p=i(33528);const A={name:"ActionAttachmentUpload",components:{NcActions:r.O3,NcActionButton:r.Js,Loading:o.gb,Folder:o.gt,Upload:o.gq},extends:a.b,mixins:[u.fB,u.eP,p.TI,p.kZ,p.qj,s.q],computed:{icon(){return this.isUploadingAttachments?o.gb:this.actionEntry.icon},isUploadingAttachments(){return this.$uploadingState.isUploadingAttachments}}};const m=(0,c.Z)(A,(function(){var t=this,e=t._self._c;return e("NcActions",{staticClass:"entry-action entry-action__image-upload",attrs:{"data-text-action-entry":t.actionEntry.key,name:t.actionEntry.label,title:t.actionEntry.label,"aria-label":t.actionEntry.label,container:t.menuIDSelector},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component",attrs:{name:t.actionEntry.label,"aria-label":t.actionEntry.label}})]},proxy:!0}])},[t._v(" "),t.$editorUpload?e("NcActionButton",{attrs:{"close-after-click":"",disabled:t.isUploadingAttachments,"data-text-action-entry":`${t.actionEntry.key}-upload`},on:{click:t.$callChooseLocalAttachment},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Upload")]},proxy:!0}],null,!1,933298848)},[t._v("\n\t\t"+t._s(t.t("text","Upload from computer"))+"\n\t")]):t._e(),t._v(" "),t.$isPublic?t._e():e("NcActionButton",{attrs:{"close-after-click":"",disabled:t.isUploadingAttachments,"data-text-action-entry":`${t.actionEntry.key}-insert`},on:{click:t.$callAttachmentPrompt},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Folder")]},proxy:!0}],null,!1,2750733237)},[t._v("\n\t\t"+t._s(t.t("text","Insert from Files"))+"\n\t")])],1)}),[],!1,null,null,null).exports;var h=i(78652),f=i(86215),g=i(73845),C=i(94091);const v={name:"ActionInsertLink",components:{NcActions:r.O3,NcActionButton:r.Js,NcActionInput:r.Iw,Document:o.BB,Loading:o.gb,LinkOff:o.pR,Web:o.ph,Shape:o.bn},extends:a.b,mixins:[u.a_,s.q],data:()=>({href:"",isInputMode:!1,startPath:null,menuOpen:!1}),computed:{activeClass(){return this.state.active?"is-active":""},relativePath(){return this.$file?.relativePath??"/"}},methods:{linkFile(){null===this.startPath&&(this.startPath=this.relativePath.split("/").slice(0,-1).join("/"));(0,f.fn)(t("text","Select file or folder to link to")).startAt(this.startPath).allowDirectories(!0).setMultiSelect(!1).setType(f.K9.Choose).build().pick().then((t=>{OC.Files.getClient().getFileInfo(t).then(((t,e)=>{const n=`${(0,C.Lz)(this.relativePath,`${e.path}/${e.name}`).split("/").map(encodeURIComponent).join("/")+("dir"===e.type?"/":"")}?fileId=${e.id}`;this.setLink(n,e.name),this.startPath=e.path+("dir"===e.type?`/${e.name}/`:"")})),this.menuOpen=!1})).catch((()=>{this.$refs.buttonFile.$el.focus()}))},linkWebsite(t){if("submit"===t?.type){const e=[...t.target.elements].filter((t=>"text"===t?.type))[0].value;return this.menuOpen=!1,this.isInputMode=!1,this.href="",this.setLink(e,e)}if((0,g.zh)(this.$editor.state,"link")){const t=(0,g.Jo)(this.$editor.state,"link");this.href=t.href}this.isInputMode=!0},setLink(t,e){t&&![/^[a-zA-Z]+:/,/^\//,/\?fileId=/,/^\.\.?\//,/^[^.]*[/$]/,/^#/].find((e=>t.match(e)))&&(t="https://"+t);const n=t.replaceAll(" ","%20"),i=this.$editor.chain();this.$editor.view.state?.selection.empty?i.insertContent({type:"paragraph",content:[{type:"text",marks:[{type:"link",attrs:{href:n}}],text:e}]}):i.setLink({href:n}),i.focus().run()},removeLink(){this.$editor.chain().unsetLink().focus().run(),this.menuOpen=!1},linkPicker(){(0,h.CE)(null,!0).then((t=>{const e=this.$editor.chain();this.$editor.view.state?.selection.empty?e.focus().insertContent(t+" ").run():e.setLink({href:t}).focus().run()})).catch((t=>{console.error("Smart picker promise rejected",t)}))}}};var b=i(93379),x=i.n(b),y=i(7795),w=i.n(y),_=i(90569),k=i.n(_),I=i(3565),B=i.n(I),S=i(19216),M=i.n(S),T=i(44589),E=i.n(T),Z=i(97053),L={};L.styleTagTransform=E(),L.setAttributes=B(),L.insert=k().bind(null,"head"),L.domAPI=w(),L.insertStyleElement=M();x()(Z.Z,L);Z.Z&&Z.Z.locals&&Z.Z.locals;const P=(0,c.Z)(v,(function(){var t=this,e=t._self._c;return e("NcActions",{staticClass:"entry-action entry-action__insert-link",class:t.activeClass,attrs:{title:t.actionEntry.label,"aria-label":t.actionEntry.label,container:t.menuIDSelector,"data-text-action-entry":t.actionEntry.key,name:t.actionEntry.label,open:t.menuOpen},on:{"update:open":e=>{t.menuOpen=t.menuOpen||e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(t.icon,{tag:"component",attrs:{name:t.actionEntry.label,"aria-label":t.actionEntry.label}})]},proxy:!0}])},[t._v(" "),t.state.active?e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-remove`},on:{click:t.removeLink},scopedSlots:t._u([{key:"icon",fn:function(){return[e("LinkOff")]},proxy:!0}],null,!1,3589828876)},[t._v("\n\t\t"+t._s(t.t("text","Remove link"))+"\n\t")]):t._e(),t._v(" "),e("NcActionButton",{ref:"buttonFile",attrs:{"data-text-action-entry":`${t.actionEntry.key}-file`},on:{click:t.linkFile},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Document")]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("text","Link to file or folder"))+"\n\t")]),t._v(" "),t.isInputMode?e("NcActionInput",{attrs:{type:"text",value:t.href,"data-text-action-entry":`${t.actionEntry.key}-input`},on:{"update:value":function(e){t.href=e},submit:t.linkWebsite},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Web")]},proxy:!0}],null,!1,1844845715)},[t._v("\n\t\t"+t._s(t.t("text","Link to website"))+"\n\t")]):e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-website`},on:{click:t.linkWebsite},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Web")]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.state.active?t.t("text","Update link"):t.t("text","Link to website"))+"\n\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-action-entry":`${t.actionEntry.key}-picker`},on:{click:t.linkPicker},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Shape")]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("text","Open the Smart Picker"))+"\n\t")])],1)}),[],!1,null,"2bcb5cb0",null).exports;var N=i(59400);const $=[{key:"outline",forceLabel:!0,icon:o.Cj,click:t=>{let{$outlineActions:e}=t;return e.toggle()},label:e=>{let{$outlineState:n}=e;return n.visible?t("text","Hide outline"):t("text","Show outline")}}],D=[{key:"undo",label:t("text","Undo"),keyChar:"z",keyModifiers:[N.v.Mod],icon:o.WP,action:t=>t.undo(),priority:6},{key:"redo",label:t("text","Redo"),keyChar:"y",keyModifiers:[N.v.Mod],icon:o.Jw,action:t=>t.redo(),priority:12},{key:"bold",label:t("text","Bold"),keyChar:"b",keyModifiers:[N.v.Mod],icon:o.VK,isActive:"strong",action:t=>t.toggleBold(),priority:7},{key:"italic",label:t("text","Italic"),keyChar:"i",keyModifiers:[N.v.Mod],icon:o.mV,isActive:"em",action:t=>t.toggleItalic(),priority:8},{key:"underline",label:t("text","Underline"),keyChar:"u",keyModifiers:[N.v.Mod],icon:o.Bz,isActive:"underline",action:t=>t.toggleUnderline(),priority:15},{key:"strikethrough",label:t("text","Strikethrough"),keyChar:"s",keyModifiers:[N.v.Mod,N.v.Shift],icon:o.Lo,isActive:"strike",action:t=>t.toggleStrike(),priority:16},{key:"headings",label:t("text","Headings"),keyChar:"1…6",keyModifiers:[N.v.Mod,N.v.Shift],icon:o.Lz,isActive:"heading",children:[{key:"headings-h1",label:t("text","Heading 1"),icon:o.Lz,isActive:["heading",{level:1}],action:t=>t.toggleHeading({level:1})},{key:"headings-h2",label:t("text","Heading 2"),icon:o.DB,isActive:["heading",{level:2}],action:t=>t.toggleHeading({level:2})},{key:"headings-h3",label:t("text","Heading 3"),icon:o.XD,isActive:["heading",{level:3}],action:t=>t.toggleHeading({level:3})},{key:"headings-h4",label:t("text","Heading 4"),isActive:["heading",{level:4}],icon:o.fy,action:t=>t.toggleHeading({level:4})},{key:"headings-h5",label:t("text","Heading 5"),isActive:["heading",{level:5}],icon:o.Ze,action:t=>t.toggleHeading({level:5})},{key:"headings-h6",label:t("text","Heading 6"),isActive:["heading",{level:6}],icon:o.J4,action:t=>t.toggleHeading({level:6})},{key:"headings-separator",isSeparator:!0,visible:t=>{let{$outlineState:e}=t;return e.enable}},{key:"outline",icon:o.Cj,click:t=>{let{$outlineActions:e}=t;return e.toggle()},visible:t=>{let{$outlineState:e}=t;return e.enable},label:e=>{let{$outlineState:n}=e;return n.visible?t("text","Hide outline"):t("text","Show outline")}}],priority:1},{key:"unordered-list",label:t("text","Unordered list"),keyChar:"8",keyModifiers:[N.v.Mod,N.v.Shift],isActive:"bulletList",icon:o.Cj,action:t=>t.toggleBulletList(),priority:9},{key:"ordered-list",label:t("text","Ordered list"),keyChar:"7",keyModifiers:[N.v.Mod,N.v.Shift],isActive:"orderedList",icon:o.mH,action:t=>t.toggleOrderedList(),priority:10},{key:"task-list",label:t("text","To-Do list"),keyChar:"9",keyModifiers:[N.v.Mod,N.v.Shift],isActive:"taskList",icon:o.Fv,action:t=>t.toggleTaskList(),priority:11},{key:"insert-link",label:t("text","Insert link"),isActive:"link",icon:o.xP,component:P,priority:2},{key:"blockquote",label:t("text","Blockquote"),keyChar:"b",keyModifiers:[N.v.Mod,N.v.Shift],isActive:"blockquote",icon:o.UX,action:t=>t.toggleBlockquote(),priority:13},{key:"callouts",label:t("text","Callouts"),visible:!1,icon:o.kI,isActive:"callout",children:[{key:"callout-info",label:t("text","Info"),isActive:["callout",{type:"info"}],icon:o.kI,action:t=>t.toggleCallout({type:"info"})},{key:"callout-success",label:t("text","Success"),isActive:["callout",{type:"success"}],icon:o.Ho,action:t=>t.toggleCallout({type:"success"})},{key:"callout-warn",label:t("text","Warning"),isActive:["callout",{type:"warn"}],icon:o.uU,action:t=>t.toggleCallout({type:"warn"})},{key:"callout-error",label:t("text","Danger"),isActive:["callout",{type:"error"}],icon:o.b0,action:t=>t.toggleCallout({type:"error"})}],priority:6},{key:"code-block",label:t("text","Code block"),keyChar:"c",keyModifiers:[N.v.Mod,N.v.Alt],isActive:"codeBlock",icon:o.Nk,action:t=>t.toggleCodeBlock(),priority:14},{key:"table",label:t("text","Table"),isActive:"table",icon:o.iA,action:t=>t.insertTable(),priority:17},{key:"emoji-picker",label:t("text","Insert emoji"),icon:o.tk,component:d,action:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.emoji(e)},priority:3},{key:"insert-attachment",label:t("text","Insert attachment"),icon:o.rU,component:m,priority:1}]},59400:(e,n,i)=>{i.d(n,{K:()=>r,v:()=>a});const o=navigator.userAgent.includes("Mac"),a={Mod:o?"Meta":"Control",Alt:"Alt",Control:"Control",Shift:"Shift"},r={[a.Mod]:o?t("text","Command"):t("text","Control"),[a.Control]:t("text","Ctrl"),[a.Alt]:t("text",o?"Option":"Alt"),[a.Shift]:t("text","Shift")}},72076:(t,e,n)=>{n.d(e,{FZ:()=>a,RR:()=>r,vK:()=>l,wr:()=>d});var i=n(59400);const o=(t,e)=>({"is-active":e,[`action-menu-${t.key}`]:!0}),a=t=>{let{keyChar:e,keyModifiers:n=[]}=t;return n.map((t=>i.v[t])).concat(e).join("+")},r=(t,e)=>{let{keyChar:n,keyModifiers:o}=e;return!t&&n?`(${function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((t=>i.K[t])).concat(t.toUpperCase()).join("+")}(n,o)})`:""},s=(t,e)=>t.action&&!t.action(e.can()),l=(t,e)=>{let{isActive:n}=t;if(!n)return!1;const i=Array.isArray(n)?n:[n];return e.isActive(...i)},c=t=>Array.isArray(t.isActive)?"radio":"string"==typeof t.isActive?"checkbox":"button",d=(t,e)=>{const n=l(t,e);return{disabled:s(t,e),class:o(t,n),active:n,type:c(t)}}},28374:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(13861),o=n(79835);const a=t=>{let{listComponent:e,items:n=(()=>{}),command:a=(t=>{let{editor:e,range:n,props:i}=t})}=t;return{items:n,command:a,render:()=>{let t,n;return{onStart:a=>{t=new o.aA(e,{parent:void 0,propsData:a}),a.clientRect&&(n=(0,i.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:t.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"}),t.ref.$on("select",(()=>{n.length>0&&n[0].hide()})))},onUpdate(e){t.updateProps(e),e.clientRect&&n&&n[0].setProps({getReferenceClientRect:e.clientRect})},onKeyDown(e){if(n)return"Escape"===e.event.key?(n[0].hide(),n[0].destroy(),t.destroy(),n=null,!0):t.ref?.onKeyDown?.(e)},onExit(){n&&(n[0].destroy(),t.destroy())}}}}}},32318:(t,e,n)=>{n.d(e,{Ah:()=>Ot,BB:()=>ut,BF:()=>pt,Bz:()=>St,Cj:()=>wt,DB:()=>gt,Ee:()=>Tt,F5:()=>Rt,Fq:()=>zt,Fv:()=>_t,HG:()=>dt,Ho:()=>Nt,IY:()=>jt,J4:()=>xt,Jw:()=>$t,L9:()=>at,Lo:()=>Bt,Lz:()=>ft,Nk:()=>lt,Pn:()=>it,QK:()=>ot,UX:()=>It,VK:()=>ht,WP:()=>Gt,WW:()=>Mt,XD:()=>Ct,Ze:()=>bt,_2:()=>Wt,b0:()=>ct,bn:()=>Dt,fy:()=>vt,gb:()=>nt,gq:()=>Vt,gr:()=>rt,gt:()=>mt,iA:()=>Ht,kI:()=>Zt,mH:()=>kt,mV:()=>yt,pR:()=>Pt,ph:()=>qt,pn:()=>Ut,rU:()=>Et,tk:()=>At,uU:()=>Ft,x8:()=>st,xP:()=>Lt});var i=n(29107),o=n(66034),a=n(66830),r=n(44358),s=n(67921),l=n(78568),c=n(25110),d=n(81984),u=n(28537),p=n(8705),A=n(54901),m=n(9989),h=n(30476),f=n(23420),g=n(93023),C=n(71927),v=n(79926),b=n(6026),x=n(23845),y=n(13527),w=n(523),_=n(20896),k=n(87767),I=n(93214),B=n(82456),S=n(33074),M=n(91044),T=n(24776),E=n(52843),Z=n(52477),L=n(29779),P=n(86015),N=n(45822),$=n(19039),D=n(14780),H=n(28297),O=n(6804),j=n(9),R=n(20583),U=n(17930),W=n(19299),z=n(67879),G=n(41260),V=n(97727),F=n(61080),q=n(31980),K=n(90619),Y=n(71327),X=n(57729),J=n(60072),Q=n(73113),tt=n(91957);const et=t=>({functional:!0,render(e,n){let{data:i,props:o}=n;return e(t,{data:i,key:i.key,staticClass:i.staticClass,props:{size:20,...o}})}}),nt={functional:!0,render(t,e){let{data:n,props:i}=e;return t(H.Z,{data:n,staticClass:"animation-rotate",props:{size:20,...i}})}},it=et(i.Z),ot=et(h.Z),at=et(f.Z),rt=et(g.Z),st=et(o.Z),lt=(et(a.Z),et(s.Z)),ct=(et(r.Z),et(l.Z)),dt=et(c.Z),ut=et(d.Z),pt=et(u.Z),At=et(p.Z),mt=et(A.Z),ht=et(m.Z),ft=et(C.Z),gt=et(v.Z),Ct=et(b.Z),vt=et(x.Z),bt=et(y.Z),xt=et(w.Z),yt=et(_.Z),wt=et(k.Z),_t=et(I.Z),kt=et(B.Z),It=et(S.Z),Bt=et(M.Z),St=et(T.Z),Mt=et(E.Z),Tt=et(Z.Z),Et=et(L.Z),Zt=et(P.Z),Lt=et(N.Z),Pt=et($.Z),Nt=(et(D.Z),et(O.Z),et(j.Z)),$t=et(R.Z),Dt=et(U.Z),Ht=et(W.Z),Ot=et(z.Z),jt=et(G.Z),Rt=et(V.Z),Ut=et(F.Z),Wt=et(q.Z),zt=(et(K.Z),et(tt.Z)),Gt=et(Y.Z),Vt=et(X.Z),Ft=et(J.Z),qt=et(Q.Z)},32892:(t,e,n)=>{n.d(e,{g:()=>d,Z:()=>g});var i=n(73845),o=n(2376),a=n(55963),r=n(87823),s=n(40187);function l(t){const e=(new DOMParser).parseFromString(t,"text/html");return function(t,e){const n=t.createNodeIterator(t.body,NodeFilter.SHOW_TEXT);let i=n.nextNode();for(;i;)e(i),i=n.nextNode()}(e,(t=>{(function(t){const e=["normal","nowrap"];let n=t.parentElement;for(;n;){const t=getComputedStyle(n),i=t?.getPropertyValue("white-space");if(i)return e.includes(i);if("PRE"===n.tagName)return!1;n=n.parentElement}return!0})(t)&&(t.textContent=t.textContent.replaceAll("\n"," "))})),e.body.innerHTML}const c=i.hj.create({name:"markdown",extendMarkSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{toMarkdown:(0,i.Nl)(t,"toMarkdown",e)}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{toMarkdown:(0,i.Nl)(t,"toMarkdown",e)}},addProseMirrorPlugins(){let t=!1;return[new o.Sy({key:new o.H$("pasteEventHandler"),props:{handleDOMEvents:{mouseup:(e,n)=>(t=n.shiftKey,!1)},handleKeyDown:(e,n)=>(t=n.shiftKey,!1),clipboardTextParser(e,n,i,o){const a=r.aw.fromSchema(o.state.schema),l=document.cloneNode(!1),c=l.createElement("div");if(t)for(const t of e.split("\n\n")){const e=l.createElement("p");e.innerText=t,c.append(e)}else c.innerHTML=s.Z.render(e);return a.parseSlice(c,{preserveWhitespace:!0,context:n})},clipboardTextSerializer:t=>{const e=t=>t.content.childCount>1?u(this.editor.schema).serialize(t.content):t.isLeaf?t.textContent:e(t.content.firstChild);return e(t)},transformPastedHTML:l}})]}}),d=t=>{let{nodes:e,marks:n}=t;return{serializer:new a.nZ(m(e),h(n)),serialize(t,e){return this.serializer.serialize(t,{...e,tightLists:!0})}}},u=t=>{let{nodes:e,marks:n}=t;return{serializer:new a.nZ(m(e),p(n)),serialize(t,e){return this.serializer.serialize(t,{...e,tightLists:!0})}}},p=t=>{const e={open:"",close:"",mixable:!0,expelEnclosingWhitespace:!0},n=f(a.Dm.marks),i=Object.entries({...n,...t}).map((t=>{let[n,i]=t;return[n,e]}));return Object.fromEntries(i)},A=t=>{const e=Object.entries(t).map((t=>{let[e,n]=t;return[e,n.spec.toMarkdown]})).filter((t=>{let[,e]=t;return e}));return Object.fromEntries(e)},m=t=>({...f(a.Dm.nodes),...A(t)}),h=t=>({...f(a.Dm.marks),...A(t)}),f=t=>{const e=t=>t.replace(/_(\w)/g,((t,e)=>e.toUpperCase()));return Object.fromEntries(Object.entries(t).map((t=>{let[n,i]=t;return[e(n),i]})))},g=c},47710:(e,n,i)=>{function o(t){setTimeout((()=>{const e=document.getElementById(`collaboration-cursor__label__${t}`);e&&(e.classList.add("collaboration-cursor__label__active"),setTimeout((()=>{e?.classList.remove("collaboration-cursor__label__active")}),50))}),50)}function a(){return Math.floor(Date.now()/1e3)}i.d(n,{lN:()=>r,iQ:()=>m,pf:()=>Ye,f3:()=>y,Ho:()=>Mn});const r=i(14539).l.extend({addOptions:()=>({provider:null,user:{name:null,clientId:null,color:null,lastUpdate:a()},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.id=`collaboration-cursor__label__${t.clientId}`,n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e}}),onCreate(){this.options.provider.awareness.on("change",((t,e)=>{let{added:n,removed:i,updated:a}=t;if("local"!==e)for(const t of[...n,...a])t!==this.options.user.clientId&&o(t)}))},onTransaction(t){let{transaction:e}=t;const{updated:n,meta:i}=e;n&&(i.addToHistory??1)&&!i.pointer&&(this.options.user.lastUpdate=a(),this.options.provider.awareness.setLocalStateField("user",this.options.user))}});var s=i(73845),l=i(2376),c=i(16722);const d=new l.H$("emoji"),u=s.NB.create({name:"emoji",addOptions:()=>({HTMLAttributes:{},suggestion:{char:":",allowedPrefixes:[" "],pluginKey:d}}),content:"text*",addCommands:()=>({emoji:t=>e=>{let{commands:n}=e;return n.insertContent(t.native+" ")}}),addProseMirrorPlugins(){return[(0,c.ZP)({editor:this.editor,...this.options.suggestion})]}});let p=!1;const A=t=>{let{editor:e}=t;const n=window._nc_focus_trap??[],i=n[n.length-1];e.can().sinkListItem("listItem")||e.can().goToNextCell()||e.can().goToPreviousCell()?(i?.pause(),p=!0):p&&(p=!1,i?.unpause())},m=s.hj.create({name:"focustrap",onFocus:A,onBlur:t=>{let{editor:e}=t;const n=window._nc_focus_trap??[],i=n[n.length-1];i?.unpause()},onSelectionUpdate:A,onTransaction:A,onUpdate:A});s.hj.create({name:"customkeymap",addKeyboardShortcuts(){return this.options},addProseMirrorPlugins:()=>[new l.Sy({props:{handleKeyDown(t,e){const n=e.key||e.keyCode;return!e.ctrlKey&&!e.metaKey||e.shiftKey||"f"!==n&&70!==n?"Delete"===e.key&&!0===e.ctrlKey?(e.stopPropagation(),window.dispatchEvent(e),!0):void 0:(e.stopPropagation(),window.dispatchEvent(e),!0)}}})]});var h=i(84348);class f{constructor(t,e,n){this.from=t,this.to=e,this.author=n}}function g(t,e,n,i){if(e>=n)return;let o,a=0;for(;a<t.length;a++)if(o=t[a],o.author===i){if(o.to>=e)break}else if(o.to>e){if(o.from<e){const i=new f(o.from,e,o.author);o.to>n?t.splice(a++,0,i):t[a++]=i}break}for(;o=t[a];)if(o.author===i){if(o.from>n)break;e=Math.min(e,o.from),n=Math.max(n,o.to),t.splice(a,1)}else{if(o.from>=n)break;if(o.to>n){t[a]=new f(n,o.to,o.author);break}t.splice(a,1)}t.splice(a,0,new f(e,n,i))}class C{constructor(t){this.blameMap=t}applyTransform(t){const e=t.getMeta("clientID")??t.steps.map((t=>"self")),n=function(t,e,n){const i=[],o=e.mapping;for(let e=0;e<t.length;e++){const n=t[e],a=o.map(n.from,1),r=o.map(n.to,-1);a<r&&i.push(new f(a,r,n.author))}for(let t=0;t<o.maps.length;t++){const e=o.maps[t],a=o.slice(t+1);e.forEach(((e,o,r,s)=>{g(i,a.map(r,1),a.map(s,-1),n[t])}))}return i}(this.blameMap,t,e);return new C(n)}}s.hj.create({name:"users",addOptions:()=>({clientID:0,color:t=>"#"+Math.floor(Math.abs(16777215*Math.sin(t))%16777215).toString(16)+"aa",name:t=>"Unknown user "+t}),addProseMirrorPlugins(){let t=null;return[new l.Sy({clientID:this.options.clientID,color:this.options.color,name:this.options.name,view:e=>(t=e,{}),state:{init:(t,e)=>({tracked:new C([new f(0,e.doc.content.size,null)],[],[],[]),deco:h.EH.empty}),apply(e,n,i,o){let{tracked:a,decos:r}=n,s=this.getState(i).tracked;return e.docChanged&&(e.getMeta("clientID")||e.setMeta("clientID",e.steps.map((t=>this.spec.clientID))),t.composing||(a=a.applyTransform(e),s=a)),r=s.blameMap.map((t=>{const e=t.author;return h.p.inline(t.from,t.to,{class:"author-annotation",style:"background-color: "+this.spec.color(e)+"66;",title:this.spec.name(e)})})).filter((t=>null!==t)),{tracked:a,deco:h.EH.create(o.doc,r)}}},props:{decorations(t){return this.getState(t).deco}}})]}});var v=i(32892),b=i(52701);const x=s.NB.create({name:"doc",content:"block",addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.insertContent("\t")}}}),y=s.hj.create({name:"PlainText",addExtensions:()=>[x,b.Z]});var w=i(33668),_=i(99734);const k=i(30561).ZP.extend({parseHTML(){return this.parent().map((t=>Object.assign(t,{preserveWhitespace:!0})))},addAttributes(){return{...this.parent?.(),bullet:{default:"-",rendered:!1,isRequired:!0,parseHTML:t=>t.getAttribute("data-bullet")}}},addInputRules(){return[(t=/^\s*([-+*])\s([^\s[]+)$/,e=this.type,new s.VK({find:t,handler:i=>{let{state:o,range:a,match:r}=i;(0,s.S0)({find:t,type:e,getAttributes:n}).handler({state:o,range:a,match:r}),r.length>=3&&o.tr.insertText(r[2])}}))];var t,e,n}});var I=i(79835),B=i(30744),S=i(32318);const M={info:S.kI,success:S.Ho,error:S.b0,warn:S.uU},T={name:"Callout",components:{NodeViewWrapper:I.T5,NodeViewContent:I.ms},props:{node:{type:Object,required:!0}},computed:{icon(){return M[this.type]||S.kI},type(){return this.node?.attrs?.type||"info"}}};var E=i(93379),Z=i.n(E),L=i(7795),P=i.n(L),N=i(90569),$=i.n(N),D=i(3565),H=i.n(D),O=i(19216),j=i.n(O),R=i(44589),U=i.n(R),W=i(94629),z={};z.styleTagTransform=U(),z.setAttributes=H(),z.insert=$().bind(null,"head"),z.domAPI=P(),z.insertStyleElement=j();Z()(W.Z,z);W.Z&&W.Z.locals&&W.Z.locals;var G=i(51900);const V=(0,G.Z)(T,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"callout",class:`callout--${t.type}`,attrs:{"data-text-el":"callout",as:"div"}},[e(t.icon,{tag:"component",staticClass:"callout__icon"}),t._v(" "),e("NodeViewContent",{staticClass:"callout__content"})],1)}),[],!1,null,"b470ea6a",null).exports,F=s.NB.create({name:"callout",content:"paragraph+",group:"block",defining:!0,addOptions:()=>({types:B.F,HTMLAttributes:{class:"callout"}}),addAttributes:()=>({type:{default:"info",rendered:!1,parseHTML:t=>t.getAttribute("data-callout")||B.F.find((e=>t.classList.contains(e)))||t.classList.contains("warning")&&"warn",renderHTML:t=>({"data-callout":t.type,class:`callout-${t.type}`})}}),parseHTML:()=>[{tag:"div.callout"},{tag:"p.callout",priority:1001}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;const{class:i}=this.options.HTMLAttributes,o={...this.options.HTMLAttributes,"data-callout":e.attrs.type,class:`${i} ${i}-${e.attrs.type}`};return["div",(0,s.P1)(o,n),0]},toMarkdown:(t,e)=>{t.write("::: "+(e.attrs.type||"info")+"\n"),t.renderContent(e),t.ensureNewLine(),t.write(":::"),t.closeBlock(e)},addNodeView:()=>(0,I.uf)(V),addCommands(){return{setCallout:t=>e=>{let{commands:n}=e;return n.wrapIn(this.name,t)},toggleCallout:t=>e=>{let{commands:n,state:i}=e;return(0,s.Ig)(i,this.name)?(0,s.Ig)(i,this.name,t)?n.unsetCallout():n.updateAttributes(this.name,t):n.setCallout(t)},unsetCallout:()=>t=>{let{commands:e}=t;return e.lift(this.name)}}}});var q=i(88776),K=i(57355),Y=i(22608),X=i(55963),J=i(20296),Q=i.n(J),tt=i(10834),et=i(1835),nt=i(3001),it=i(19158),ot=i(48605),at=i(95749),rt=i(83330),st=i(58963),lt=i(38250),ct=i(66830),dt=i(86215);const ut={data:()=>({copied:!1,copyLoading:!1,copySuccess:!1}),methods:{async copyToClipboard(e){this.copyLoading=!0;try{await navigator.clipboard.writeText(e),this.copySuccess=!0,this.copied=!0,(0,dt.s$)(t("text","Copied to the clipboard"))}catch(e){this.copySuccess=!1,this.copied=!0,(0,dt.x2)(`<div>${t("text","Could not copy to the clipboard")}</div>`,{isHTML:!0})}finally{this.copyLoading=!1,setTimeout((()=>{this.copySuccess=!1,this.copied=!1}),4e3)}}}},pt={name:"CodeBlockView",components:{MarkerIcon:rt.Z,ContentCopy:lt.Z,Help:st.Z,Check:ct.Z,Eye:at.Z,ViewSplitVertical:it.Z,CodeBraces:ot.Z,NcActions:tt.O3,NcActionButton:tt.Js,NcActionInput:tt.Iw,NcActionLink:tt.ih,NcActionSeparator:tt.rr,NcLoadingIcon:tt.lb,NodeViewWrapper:I.T5,NodeViewContent:I.ms},mixins:[ut],props:{node:{type:Object,required:!0},editor:{type:Object,required:!0}},data:()=>({isEditable:!1,viewMode:"preview",targetId:"mermaid-view-"+(0,nt.Z)()}),computed:{hasCode(){return this.node?.textContent},type(){return this.node?.attrs?.language||""},supportPreview(){return["mermaid"].includes(this.type)},showCode(){return!this.supportPreview||"code"===this.viewMode||"side-by-side"===this.viewMode},showPreview(){return this.supportPreview&&("preview"===this.viewMode||"side-by-side"===this.viewMode)},defaultMode(){return this.isEditable?"side-by-side":this.supportPreview()?"code":"preview"}},watch:{"node.textContent"(){this.renderMermaid()}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable})),this.renderMermaidDebounced=Q()((async function(){if(!this.supportPreview)return void(this.viewMode="code");const t=this.node?.textContent||"";""===t.trim()&&(this.viewMode=this.defaultMode,this.$refs.preview.innerHTML="");try{await et.N.parse(t);const{svg:e}=await et.N.render(this.targetId,t),n=document.getElementById(this.targetId);n&&(n.style.display="none"),this.$refs.preview.innerHTML=e}catch(t){console.debug("Invalid mermaid source",t),"preview"===this.viewMode&&(this.viewMode=this.isEditable?"side-by-side":"code")}}),250),et.N.initialize({startOnLoad:!1}),this.$nextTick((()=>{this.renderMermaid()}))},methods:{async copyCode(){await this.copyToClipboard(this.node?.textContent)},updateLanguage(t){this.updateAttributes({language:t.target.value})},renderMermaid(){this.renderMermaidDebounced()}}};var At=i(17416),mt={};mt.styleTagTransform=U(),mt.setAttributes=H(),mt.insert=$().bind(null,"head"),mt.domAPI=P(),mt.insertStyleElement=j();Z()(At.Z,mt);At.Z&&At.Z.locals&&At.Z.locals;const ht=(0,G.Z)(pt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"code-block",attrs:{as:"div","data-mode":t.viewMode}},[e("div",{staticClass:"code-block-header"},[e("div",{staticClass:"view-switch"},[e("NcActions",{attrs:{"aria-label":t.t("text","Copy code block")}},[t.hasCode?e("NcActionButton",{attrs:{"data-cy":"copy-code","aria-label":t.t("text","Copy code"),"close-after-click":!1},on:{click:t.copyCode},scopedSlots:t._u([{key:"icon",fn:function(){return[t.copySuccess?e("Check",{attrs:{size:20}}):t.copyLoading?e("NcLoadingIcon",{attrs:{size:20}}):e("ContentCopy",{attrs:{size:20}})]},proxy:!0}],null,!1,2104404999)}):t._e()],1),t._v(" "),t.isEditable?e("NcActions",{attrs:{"data-cy":"code-action-group","aria-label":t.t("text","Code block options")}},[e("NcActionInput",{attrs:{label:t.t("text","Code block language"),value:t.type,"show-trailing-button":!1,placeholder:t.t("text","e.g. php, javascript, json…")},on:{input:t.updateLanguage},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MarkerIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3768505569)}),t._v(" "),t.supportPreview?e("NcActionSeparator"):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="code"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CodeBraces",{attrs:{size:20}})]},proxy:!0}],null,!1,2428748609)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Source code"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="preview"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Eye",{attrs:{size:20}})]},proxy:!0}],null,!1,1151454737)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Diagram"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(e){t.viewMode="side-by-side"}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ViewSplitVertical",{attrs:{size:20}})]},proxy:!0}],null,!1,3354721413)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Both"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.supportPreview?e("NcActionSeparator"):t._e(),t._v(" "),t.supportPreview?e("NcActionLink",{attrs:{href:"https://mermaid.js.org/intro/",target:"_blank"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Help",{attrs:{size:20}})]},proxy:!0}],null,!1,802739225)},[t._v("\n\t\t\t\t\t"+t._s(t.t("text","Mermaid documentation"))+"\n\t\t\t\t")]):t._e()],1):t._e()],1)]),t._v(" "),e("div",{class:{"split-view":t.showCode&&t.showPreview}},[e("pre",{directives:[{name:"show",rawName:"v-show",value:t.showCode,expression:"showCode"}],staticClass:"split-view__code"},[e("NodeViewContent",{attrs:{spellcheck:"false",as:"code",tabindex:"-1",contenteditable:t.isEditable}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPreview,expression:"showPreview"}],ref:"preview",staticClass:"split-view__preview",attrs:{contenteditable:!1}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:t.targetId,contenteditable:!1}})])])}),[],!1,null,"75402d1e",null).exports,ft=Y.Z.extend({parseHTML:()=>[{tag:"pre",preserveWhitespace:"full",getContent:(t,e)=>{const n=t.textContent.replace(/\n$/,""),i=n?[e.text(n)]:[];return e.nodes.codeBlock.create(null,i)}}],toMarkdown:(t,e,n,i)=>(e.attrs.params=e.attrs.language,X.Dm.nodes.code_block(t,e,n,i)),addNodeView:()=>(0,I.uf)(ht),addKeyboardShortcuts(){return{"Mod-a":()=>{if(!this.editor.isActive("codeBlock"))return;const t=this.editor.state.selection.$from.node().nodeSize;this.editor.commands.selectParentNode();const e=this.editor.state.selection.$from.pos,n=e+t;return this.editor.commands.setTextSelection({from:e,to:n}),!0}}}});var gt=i(20336),Ct=i(79829),vt=i(22773);const bt=s.NB.create({name:"tableCaption",content:"inline*",allowGapCursor:!1,addAttributes:()=>({}),renderHTML:()=>["caption"],toMarkdown(t,e){},parseHTML:()=>[{tag:"table caption",priority:90}]});var xt=i(658),yt=i(87823);const wt=xt.p.extend({content:"inline*",toMarkdown(t,e){t.write(" ");const n=t.options?.escapeExtraCharacters,i=t.options.currentColumnIndex;t.options.escapeExtraCharacters=/\|/;let o=0;e.content.forEach(((t,n,i)=>{o+=t.text?.length||6,t.text?.includes("|")&&(o+=1),"  "===t.attrs.syntax&&(e.child(i).attrs.syntax="html")}));const a=t.options.columnWidths[i],r=e.attrs?.textAlign||"left",s=a-o,l=Math.floor(s/2),c=Math.ceil(s/2);"center"===r&&t.write(" ".repeat(l)),"right"===r&&t.write(" ".repeat(s)),t.renderInline(e),"center"===r&&t.write(" ".repeat(c)),"left"===r&&t.write(" ".repeat(s)),t.options.escapeExtraCharacters=n,t.write(" |"),t.options.currentColumnIndex++},parseHTML:()=>[{tag:"td",preserveWhitespace:!0},{tag:"th",preserveWhitespace:!0},{tag:"table thead ~ tbody th",priority:70,preserveWhitespace:!0},{tag:"table thead ~ tbody td",priority:70,preserveWhitespace:!0}],addAttributes(){return{...this.parent?.(),textAlign:{rendered:!1,parseHTML:t=>t.style.textAlign||null}}},addProseMirrorPlugins(){return[new l.Sy({props:{handlePaste:(t,e,n)=>{if(!this.editor.isActive(this.type.name))return!1;const{state:i}=t,o=[];let a=!1;n.content.descendants(((t,e)=>{t.isText?(o.push(i.schema.text(t.textContent,t.marks)),a=!1):a||(o.push(i.schema.text("\n")),a=!0)}));const r=i.schema.node("paragraph",[],o);n.content=yt.HY.empty.addToStart(r)}}})]}});const _t=i(43626).x.extend({content:"inline*",toMarkdown(t,e){const n=t.options.currentHeaderIndex,i=t.options.columnWidths[n],o=e.attrs?.textAlign||"left",a=i-e.content.size,r=Math.floor(a/2),s=Math.ceil(a/2);t.write(" "),"center"===o&&t.write(" ".repeat(r)),"right"===o&&t.write(" ".repeat(a)),t.renderInline(e),"center"===o&&t.write(" ".repeat(s)),"left"===o&&t.write(" ".repeat(a)),t.write(" |"),t.options.currentHeaderIndex++},parseHTML:()=>[{tag:"table thead:empty ~ tbody :first-child th",priority:80},{tag:"table thead:empty ~ tbody :first-child td",priority:80},{tag:"table thead :first-child th",priority:60},{tag:"table thead :first-child td",priority:60},{tag:"table tbody :first-child th",priority:60},{tag:"table tbody :first-child td",priority:60},{tag:"table > :first-child > th",priority:60},{tag:"table > :first-child > td",priority:60}],addAttributes(){return{...this.parent?.(),textAlign:{rendered:!1,parseHTML:t=>t.style.textAlign||null}}}});const kt=i(33991).S.extend({content:"tableCell*",allowGapCursor:!1,toMarkdown(t,e){t.write("|"),t.options.currentColumnIndex=0,t.renderInline(e),t.ensureNewLine()},parseHTML:()=>[{tag:"tr",priority:70}]}),It=kt.extend({name:"tableHeadRow",content:"tableHeader+",allowGapCursor:!1,toMarkdown(t,e){t.write("|"),t.renderInline(e),t.ensureNewLine(),t.write("|"),e.forEach(((e,n,i)=>{let o=t.repeat("-",t.options.columnWidths[i]+2);const a=e.attrs?.textAlign;"center"!==a&&"left"!==a||(o=":"+o.slice(1)),"center"!==a&&"right"!==a||(o=o.slice(0,-1)+":"),t.write(o),t.write("|")})),t.ensureNewLine()},parseHTML:()=>[{tag:"tr:first-of-type",priority:80}]});var Bt=i(97245);const St=vt.iA.extend({content:"tableCaption? tableHeadRow tableRow*",addExtensions:()=>[bt,wt,_t,It,kt],addCommands(){return{...this.parent(),addRowAfter:()=>t=>{let{chain:e,dispatch:n}=t;return e().command((t=>{let{state:e}=t;return(0,Bt.dl)(e,n)})).command((t=>{let{state:e,tr:i}=t;const{tableStart:o,table:a,bottom:r}=(0,Bt.zN)(e);if(n){const t=a.child(r-1),e=a.child(r);let n=o+1;for(let t=0;t<r;t++)n+=a.child(t).nodeSize;for(let o=0;o<t.childCount;o++)i.setNodeAttribute(n,"textAlign",t.child(o).attrs.textAlign),n+=e.child(o).nodeSize}return!0})).run()},addRowBefore:()=>t=>{let{chain:e,dispatch:n}=t;return e().command((t=>{let{state:e}=t;return(0,Bt.z2)(e,n)})).command((t=>{let{state:e,tr:i}=t;const{tableStart:o,table:a,top:r}=(0,Bt.zN)(e);if(n){const t=a.child(r),e=a.child(r-1);let n=o+1;for(let t=0;t<r-1;t++)n+=a.child(t).nodeSize;for(let o=0;o<t.childCount;o++)i.setNodeAttribute(n,"textAlign",t.child(o).attrs.textAlign),n+=e.child(o).nodeSize}return!0})).run()},insertTable:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if((0,Bt.Lw)(e))return!1;const o=function(t,e,n,i){const o=[],a=[];for(let e=0;e<n;e+=1){const e=t.nodes.tableCell.createAndFill();e&&a.push(e);const n=t.nodes.tableHeader.createAndFill();n&&o.push(n)}const r=t.nodes.tableHeadRow.createChecked(null,o),s=[];for(let n=1;n<e;n+=1)s.push(t.nodes.tableRow.createChecked(null,a));return t.nodes.table.createChecked(null,[r,...s])}(i.schema,3,3);if(n){const t=e.selection.anchor+1;e.replaceSelectionWith(o).scrollIntoView().setSelection(l.Bs.near(e.doc.resolve(t)))}return!0},leaveTable:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if(!(0,Bt.Lw)(e))return!1;const{$head:o,empty:a}=e.selection;if(!a)return!1;const r=o.depth<3?1:o.depth-2;if(n){const t=e.doc.resolve(o.after(r)+1),i=l.Bs.near(t);n(e.setSelection(i).scrollIntoView())}return!0},goToNextRow:()=>t=>{let{tr:e,dispatch:n,editor:i}=t;if(!(0,Bt.Lw)(e))return!1;const o=function(t){if(t.index(-1)===t.node(-1).childCount-1)return null;let e=t.after();const n=t.node(-1);for(let i=t.indexAfter(-1);i<n.childCount;i++){const o=n.child(i);if(o.childCount>=t.index()){for(let n=0;n<t.index();n++)e+=o.child(n).nodeSize;return e+1}e+=o.nodeSize}}((0,Bt.Le)(e));if(null!=o){if(n){const t=e.doc.resolve(o),i=l.Bs.between(t,(0,Bt.SZ)(t));n(e.setSelection(i).scrollIntoView())}return!0}}}},renderHTML(t){let{HTMLAttributes:e}=t;return["div",{class:"table-wrapper",style:"overflow-x: auto;"},["table",(0,s.P1)(this.options.HTMLAttributes,e),0]]},toMarkdown(t,e){const n=function(t){const e=[];return t.content.forEach((t=>{t.content.forEach(((t,n,i)=>{e[i]||(e[i]=[]),e[i].push(t)}))})),e}(e);t.options.columnWidths=function(t){const e=[];return t.forEach((t=>{let n=0;t.forEach((t=>{let e=0;t.content.forEach((t=>{e+=t.text?.length||6,t.text?.includes("|")&&(e+=1)})),n=Math.max(n,e)})),e.push(n)})),e}(n),t.options.currentHeaderIndex=0,t.renderContent(e),t.closeBlock(e)},addKeyboardShortcuts(){return{...this.parent(),Tab:()=>this.editor.commands.goToNextCell()||this.editor.commands.leaveTable(),Enter:t=>{let{editor:e}=t;const{selection:n}=e.state;return!!n.$from.parent.type.name.startsWith("table")&&("hardBreak"===n.$from.nodeBefore?.type.name?!(!e.can().goToNextRow()&&!e.can().addRowAfter())&&(e.chain().setTextSelection({from:n.from-1,to:n.from}).deleteSelection().run(),!!e.commands.goToNextRow()||e.chain().addRowAfter().goToNextRow().run()):e.chain().insertContent('<br data-syntax="html" />').focus().run())}}}});const Mt={name:"TableView",components:{NcActionButton:tt.Js,NcActions:tt.O3,NodeViewWrapper:I.T5,NodeViewContent:I.ms,TableSettings:S._2,Delete:S.HG},props:{editor:{type:Object,required:!0},deleteNode:{type:Function,required:!0}},data:()=>({isEditable:!1}),beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))}};var Tt=i(16161),Et={};Et.styleTagTransform=U(),Et.setAttributes=H(),Et.insert=$().bind(null,"head"),Et.domAPI=P(),Et.insertStyleElement=j();Z()(Tt.Z,Et);Tt.Z&&Tt.Z.locals&&Tt.Z.locals;const Zt=(0,G.Z)(Mt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"table-wrapper",attrs:{"data-text-el":"table-view"}},[t.isEditable?e("NcActions",{staticClass:"table-settings",attrs:{"force-menu":"","data-text-table-actions":"settings"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableSettings")]},proxy:!0}],null,!1,1699550424)},[t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"delete","close-after-click":""},on:{click:t.deleteNode},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t"+t._s(t.t("text","Delete this table"))+"\n\t\t")])],1):t._e(),t._v(" "),e("NodeViewContent",{staticClass:"content",attrs:{as:"table"}}),t._v(" "),e("div",{staticClass:"clearfix"})],1)}),[],!1,null,"048279dc",null).exports;const Lt={name:"TableCellView",components:{NcActionButton:tt.Js,NcActions:tt.O3,NodeViewWrapper:I.T5,NodeViewContent:I.ms,TableAddRowBefore:S.pn,TableAddRowAfter:S.F5,Delete:S.HG},props:{editor:{type:Object,required:!0},getPos:{type:Function,required:!0}},data:()=>({isEditable:!1}),computed:{textAlign(){return{"text-align":this.node.attrs.textAlign}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))},methods:{deleteRow(){this.editor.chain().focus().setTextSelection(this.getPos()).deleteRow().run()},addRowBefore(){this.editor.chain().focus().setTextSelection(this.getPos()).addRowBefore().run()},addRowAfter(){this.editor.chain().focus().setTextSelection(this.getPos()).addRowAfter().run()}}};var Pt=i(59861),Nt={};Nt.styleTagTransform=U(),Nt.setAttributes=H(),Nt.insert=$().bind(null,"head"),Nt.domAPI=P(),Nt.insertStyleElement=j();Z()(Pt.Z,Nt);Pt.Z&&Pt.Z.locals&&Pt.Z.locals;const $t=(0,G.Z)(Lt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{style:t.textAlign,attrs:{"data-text-el":"table-cell",as:"td"}},[e("div",{staticClass:"container"},[e("NodeViewContent",{staticClass:"content"}),t._v(" "),t.isEditable?e("NcActions",{attrs:{"data-text-table-actions":"row"}},[e("NcActionButton",{attrs:{"data-text-table-action":"add-row-before","close-after-click":""},on:{click:t.addRowBefore},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddRowBefore")]},proxy:!0}],null,!1,1805502767)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add row before"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-row-after","close-after-click":""},on:{click:t.addRowAfter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddRowAfter")]},proxy:!0}],null,!1,3179199218)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add row after"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"remove-row","close-after-click":""},on:{click:t.deleteRow},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Delete this row"))+"\n\t\t\t")])],1):t._e()],1)])}),[],!1,null,"2f56cd8c",null).exports;const Dt={name:"TableHeaderView",components:{AlignHorizontalCenter:S.QK,AlignHorizontalLeft:S.L9,AlignHorizontalRight:S.gr,Delete:S.HG,NcActionButton:tt.Js,NcActionButtonGroup:tt.xQ,NcActions:tt.O3,NodeViewWrapper:I.T5,NodeViewContent:I.ms,TableAddColumnBefore:S.IY,TableAddColumnAfter:S.Ah},props:{editor:{type:Object,required:!0},getPos:{type:Function,required:!0},node:{type:Object,required:!0}},data:()=>({isEditable:!1}),computed:{textAlign(){return{"text-align":this.node.attrs.textAlign}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable}))},methods:{alignCenter(){this.align("center")},alignLeft(){this.align("left")},alignRight(){this.align("right")},align(t){for(this.editor.chain().focus().setTextSelection(this.getPos()).setCellAttribute("textAlign",t).run();this.editor.commands.goToNextRow();)this.editor.commands.setCellAttribute("textAlign",t);this.editor.chain().setTextSelection(this.getPos()).focus().run(),this.$refs.menu.closeMenu(!1)},deleteColumn(){this.editor.chain().focus().setTextSelection(this.getPos()).deleteColumn().run()},addColumnBefore(){this.editor.chain().focus().setTextSelection(this.getPos()).addColumnBefore().run()},addColumnAfter(){this.editor.chain().focus().setTextSelection(this.getPos()).addColumnAfter().run()}}};var Ht=i(60052),Ot={};Ot.styleTagTransform=U(),Ot.setAttributes=H(),Ot.insert=$().bind(null,"head"),Ot.domAPI=P(),Ot.insertStyleElement=j();Z()(Ht.Z,Ot);Ht.Z&&Ht.Z.locals&&Ht.Z.locals;const jt=(0,G.Z)(Dt,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{style:t.textAlign,attrs:{"data-text-el":"table-header",as:"th"}},[e("div",[e("NodeViewContent",{staticClass:"content"}),t._v(" "),t.isEditable?e("NcActions",{ref:"menu",attrs:{"data-text-table-actions":"header"}},[e("NcActionButtonGroup",[e("NcActionButton",{attrs:{"data-text-table-action":"align-column-left","aria-label":t.t("text","Left align column"),type:"radio",value:"left","model-value":t.node.attrs.textAlign},on:{click:t.alignLeft},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalLeft")]},proxy:!0}],null,!1,2968467243)}),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"align-column-center","aria-label":t.t("text","Center align column"),type:"radio",value:"center","model-value":t.node.attrs.textAlign},on:{click:t.alignCenter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalCenter")]},proxy:!0}],null,!1,536750267)}),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"align-column-right","aria-label":t.t("text","Right align column"),type:"radio",value:"right","model-value":t.node.attrs.textAlign},on:{click:t.alignRight},scopedSlots:t._u([{key:"icon",fn:function(){return[e("AlignHorizontalRight")]},proxy:!0}],null,!1,3861151024)})],1),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-column-before","close-after-click":""},on:{click:t.addColumnBefore},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddColumnBefore")]},proxy:!0}],null,!1,3782681875)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add column before"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"add-column-after","close-after-click":""},on:{click:t.addColumnAfter},scopedSlots:t._u([{key:"icon",fn:function(){return[e("TableAddColumnAfter")]},proxy:!0}],null,!1,1608287598)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Add column after"))+"\n\t\t\t")]),t._v(" "),e("NcActionButton",{attrs:{"data-text-table-action":"remove-column","close-after-click":""},on:{click:t.deleteColumn},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)},[t._v("\n\t\t\t\t"+t._s(t.t("text","Delete this column"))+"\n\t\t\t")])],1):t._e()],1)])}),[],!1,null,"a456a642",null).exports;function Rt(t,e){return t.extend({addNodeView:()=>(0,I.uf)(e)})}const Ut=St.extend({addNodeView:()=>(0,I.uf)(Zt),addExtensions:()=>[bt,Rt(wt,$t),Rt(_t,jt),It,kt]});var Wt=i(28374),zt=i(31352);const Gt={name:"EmojiList",props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data:()=>({selectedIndex:0}),computed:{hasResults(){return this.items.length>0},itemHeight(){return this.$el.scrollHeight/this.items.length},itemInsideScrollView(){return this.selectedIndex*this.itemHeight>=this.$el.scrollTop&&(this.selectedIndex+1)*this.itemHeight<=this.$el.scrollTop+this.$el.clientHeight}},watch:{items(){this.selectedIndex=0,this.$el.scrollTop=0}},methods:{t:zt.Iu,onKeyDown(t){let{event:e}=t;return!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&("ArrowUp"===e.key?(this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=this.selectedIndex*this.itemHeight),!0):"ArrowDown"===e.key?(this.selectedIndex=(this.selectedIndex+1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=(this.selectedIndex+1)*this.itemHeight-this.$el.clientHeight),!0):("Enter"===e.key||"Tab"===e.key)&&(this.selectItem(this.selectedIndex),!0))},selectItem(t){const e=this.items[t];e&&(this.command(e),(0,tt.Ry)(e))}}};var Vt=i(35437),Ft={};Ft.styleTagTransform=U(),Ft.setAttributes=H(),Ft.insert=$().bind(null,"head"),Ft.domAPI=P(),Ft.insertStyleElement=j();Z()(Vt.Z,Ft);Vt.Z&&Vt.Z.locals&&Vt.Z.locals;const qt=(0,G.Z)(Gt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"emoji-list"},[t.hasResults?t._l(t.items,(function(n,i){return e("div",{key:i,staticClass:"emoji-list__item",class:{"is-selected":i===t.selectedIndex},on:{click:function(e){return t.selectItem(i)}}},[e("span",{staticClass:"emoji-list__item__emoji"},[t._v("\n\t\t\t\t"+t._s(n.native)+"\n\t\t\t")]),t._v("\n\t\t\t:"+t._s(n.short_name)+"\n\t\t")])})):e("div",{staticClass:"emoji-list__item is-empty"},[t._v("\n\t\t"+t._s(t.t("text","No emoji found"))+"\n\t")])],2)}),[],!1,null,"74f9a54a",null).exports;const Kt=i(83416).ZP.extend({name:"frontMatter",draggable:!1,renderHTML(e){let{node:n,HTMLAttributes:i}=e;return this.parent({node:n,HTMLAttributes:(0,s.P1)(i,{"data-title":t("text","Front matter"),class:"frontmatter"})})},parseHTML:()=>[{tag:"pre#frontmatter",preserveWhitespace:"full",priority:9001,attrs:{language:"yaml"}}],toMarkdown:(t,e)=>{if(!t.out.match(/^\s*/))throw Error("FrontMatter must be the first node of the document!");const n=e.textContent,i=n.match(/-{3,}/gm),o=i?i.sort().slice(-1)[0]+"-":"---";t.write(""),t.out="",t.write(`${o}\n`),t.text(n,!1),t.ensureNewLine(),t.write(o),t.closeBlock(e)},addInputRules(){return[{find:/^---$/g,handler:t=>{let{state:e,range:n,chain:i}=t;return 1===n.from&&(e.doc.resolve(1).parent.type.name!==this.name&&(i().deleteRange(n).insertContentAt(0,{type:this.name}),!0))}}]},addCommands:()=>({}),addPasteRules:()=>[],addProseMirrorPlugins:()=>[]});var Yt=i(9966);const Xt=i(35525).Z.extend({addAttributes:()=>({syntax:{default:"  ",rendered:!1,keepOnSplit:!0,parseHTML:t=>t.getAttribute("data-syntax")||"  "}}),addCommands(){return{...this?.parent(),setHardBreak:()=>t=>{for(let e=t.state.selection.$from.depth;e>=0;e--)if("heading"===t.state.selection.$from.node(e).type.name)return!1;return this.parent().setHardBreak()(t)}}},toMarkdown(t,e,n,i){for(let o=i+1;o<n.childCount;o++)if(n.child(o).type!==e.type)return void("html"!==e.attrs.syntax?(t.write(e.attrs.syntax),n.child(o).text?.startsWith("\n")||t.write("\n")):t.write("<br />"))}});var Jt=i(7490),Qt=i(63811),te=i.n(Qt);function ee(t){const e=new Map,n=[];return t.descendants(((t,i)=>{if("heading"!==t.type.name)return;const o=t.textContent;if(!o)return;const a=(t=>{const n=te()(t);if(e.has(n)){const t=e.get(n);return e.set(n,t+1),`h-${n}--${t}`}return e.set(n,1),"h-"+n})(o);n.push(Object.freeze({level:t.attrs.level,text:o,id:a,offset:i}))})),n}const ne=new l.H$("headingAnchor");function ie(){return new l.Sy({key:ne,state:{init(t,e){let{doc:n}=e;console.debug("headingAnchor init");const i=ee(n);return{headings:i,decorations:ae(n,i)}},apply(t,e,n,i){if(!t.docChanged)return e;const o=ee(i.doc),a=function(t,e,n){if(i=n,o=t.headings,i.length!==o.length||i.some(oe(o)))return!1;var i,o;let a=!1;const r=t.decorations.map(e.mapping,e.doc,{onRemove:()=>{a=!0}});return!a&&r}(e,t,o)||ae(i.doc,o);return{headings:o,decorations:a}}},props:{decorations(t){return this.getState(t).decorations}}})}const oe=t=>(e,n)=>e.id!==t[n].id||e.level!==t[n].level;function ae(t,e){const n=e.map(re);return h.EH.create(t,n)}function re(t){return h.p.widget(t.offset+1,function(t){const e=document.createElement("a"),n=document.createTextNode("#");return e.appendChild(n),e.setAttribute("id",t.id),e.setAttribute("aria-hidden","true"),e.className="heading-anchor",e.setAttribute("href",`#${t.id}`),e.setAttribute("title",window.t("text","Link to this section")),e.setAttribute("contenteditable","false"),e.addEventListener("click",se),e}(t),{side:-1})}function se(t){t.stopPropagation(),t.target.scrollIntoView(),window.location.hash=t.target.getAttribute("href")}var le=i(25030);const ce=Jt.Z.extend({addKeyboardShortcuts(){return this.options.levels.reduce(((t,e)=>({...t,[`Mod-Shift-${e}`]:()=>this.editor.commands.toggleHeading({level:e})})),{})},onUpdate(t){let{editor:e}=t;const n=ne.getState(e.state)?.headings??[];var i;i=n,le.default.dispatch("text/setHeadings",i)},addProseMirrorPlugins:()=>[ie()]});var de=i(25748),ue=i(26761),pe=i(2649),Ae=i.n(pe),me=i(20629);const he={name:"ShowImageModal",components:{NcModal:tt.Jc},props:{images:{type:Array,required:!0},startIndex:{type:Number,default:0},show:{type:Boolean,default:!1}},data:()=>({currentImageIndex:0}),computed:{currentImage(){return this.images[this.currentImageIndex]}},watch:{startIndex(t){this.currentImageIndex=t}},methods:{showNextImage(){this.currentImageIndex=(this.currentImageIndex+1)%this.images.length},showPreviousImage(){this.currentImageIndex=this.currentImageIndex<=0?this.images.length-1:this.currentImageIndex-1}}};var fe=i(62657),ge={};ge.styleTagTransform=U(),ge.setAttributes=H(),ge.insert=$().bind(null,"head"),ge.domAPI=P(),ge.insertStyleElement=j();Z()(fe.Z,ge);fe.Z&&fe.Z.locals&&fe.Z.locals;const Ce=(0,G.Z)(he,(function(){var t=this,e=t._self._c;return t.show?e("NcModal",{attrs:{size:"large",name:t.currentImage.name,"out-transition":!0,"has-next":!0,"has-previous":!0,"close-button-contained":!1,dark:!0},on:{next:t.showNextImage,previous:t.showPreviousImage,close:function(e){return t.$emit("close")}}},[e("div",{staticClass:"modal__content"},[e("img",{attrs:{src:t.currentImage.previewUrl}})])]):t._e()}),[],!1,null,"403f8ff2",null).exports;var ve=i(13815),be=i(31728),xe=i(69183);class ye extends Error{constructor(e,n){super(e?.message||t("text","Failed to load")),this.reason=e,this.imageUrl=n}}const we={name:"ImageView",components:{ImageIcon:S.Ee,DeleteIcon:S.HG,NcButton:tt.P2,ShowImageModal:Ce,NodeViewWrapper:I.T5},directives:{ClickOutside:Ae()},mixins:[ve.Z,be.Zf],props:["editor","node","extension","updateAttributes","deleteNode"],data:()=>({attachment:null,imageLoaded:!1,loaded:!1,failed:!1,showIcons:!1,imageUrl:null,errorMessage:null,attachmentSize:null,showImageModal:!1,imageIndex:null,isEditable:!1,embeddedImageList:[]}),computed:{...(0,me.Se)({imageAttachments:"text/imageAttachments"}),attachmentType(){return this.attachment?this.attachment.isImage?"image":"media":null},isMediaAttachment(){return"media"===this.attachmentType},showDeleteIcon(){return this.isEditable&&this.showIcons},showImageDeleteIcon(){return this.showDeleteIcon&&!this.isMediaAttachment},canDisplayImage(){return!(!this.failed||!this.loaded)||this.loaded&&this.imageLoaded},src:{get(){return this.node.attrs.src||""},set(t){this.updateAttributes({src:t})}},alt:{get(){return this.node.attrs.alt?this.node.attrs.alt:""},set(t){this.updateAttributes({alt:t})}}},beforeMount(){this.isEditable=this.editor.isEditable,this.editor.on("update",(t=>{let{editor:e}=t;this.isEditable=e.isEditable})),this.loadPreview().catch(this.onImageLoadFailure)},methods:{async loadPreview(){return this.attachment=await this.$attachmentResolver.resolve(this.src),new Promise(((t,e)=>{const n=new Image;n.onload=async()=>{this.imageUrl=this.attachment.previewUrl,this.imageLoaded=!0,this.loaded=!0,this.attachmentSize=this.attachment.size},n.onerror=t=>{e(new ye(t,this.attachment.previewUrl))},n.src=this.attachment.previewUrl}))},onImageLoadFailure(t){this.failed=!0,this.imageLoaded=!1,this.loaded=!0,this.errorMessage=t.message,t instanceof ye&&(this.errorMessage=`${this.errorMessage} ${this.src}`),this.$emit("error",{error:t,src:this.src})},updateAlt(t){this.updateAttributes({alt:t.target.value})},onLoaded(){this.loaded=!0},async updateEmbeddedImageList(){this.embeddedImageList=[];const t=Array.from(document.querySelectorAll('figure[data-component="image-view"][data-attachment-type="image"]:not(.image-view--failed).image-view'));for(const e of t){const t=e.getAttribute("data-src");if(!this.embeddedImageList.find((e=>e.src===t))){const n=await this.$attachmentResolver.resolve(e.getAttribute("data-src"));this.embeddedImageList.push({src:t,...n})}}},handleAttachmentClick(){OCA.Viewer&&!OCA.Viewer.file&&-1!==OCA.Viewer.mimetypes.indexOf(this.attachment.mimetype)&&this.attachment.davPath?OCA.Viewer.open({path:this.attachment.davPath}):window.location.assign(this.attachment.fullUrl)},async handleImageClick(){await this.updateEmbeddedImageList(),this.imageIndex=this.embeddedImageList.findIndex((t=>t.src===this.src)),-1!==this.imageIndex?this.showImageModal=!0:(console.error("Could not find image in attachments list",this.attachment),(0,dt.x2)(t("text","Could not find image in attachments list.")))},onDelete(){(0,xe.j8)("text:image-node:delete",this.imageUrl),this.deleteNode()}}};var _e=i(37204),ke={};ke.styleTagTransform=U(),ke.setAttributes=H(),ke.insert=$().bind(null,"head"),ke.domAPI=P(),ke.insertStyleElement=j();Z()(_e.Z,ke);_e.Z&&_e.Z.locals&&_e.Z.locals;const Ie=(0,G.Z)(we,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{attrs:{contenteditable:t.isEditable}},[e("figure",{staticClass:"image image-view",class:{"icon-loading":!t.loaded,"image-view--failed":t.failed},attrs:{"data-component":"image-view","data-attachment-type":t.attachmentType,"data-src":t.src}},[t.canDisplayImage?e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:()=>t.showIcons=!1,expression:"() => showIcons = false"}],staticClass:"image__view",on:{mouseover:function(e){t.showIcons=!0},mouseleave:function(e){t.showIcons=!1}}},[e("transition",{attrs:{name:"fade"}},[t.failed?[e("ImageIcon",{staticClass:"image__main image__main--broken-icon",attrs:{size:100}})]:[t.isMediaAttachment?e("div",{staticClass:"media",attrs:{contenteditable:"false"},on:{click:t.handleAttachmentClick}},[e("div",{staticClass:"media__wrapper"},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__main",attrs:{src:t.imageUrl,alt:t.alt},on:{load:t.onLoaded}}),t._v(" "),e("div",{staticClass:"metadata"},[e("span",{staticClass:"name"},[t._v(t._s(t.alt))]),t._v(" "),e("span",{staticClass:"size"},[t._v(t._s(t.attachmentSize))])])]),t._v(" "),t.showDeleteIcon?e("div",{staticClass:"buttons"},[e("NcButton",{attrs:{"aria-label":t.t("text","Delete this attachment"),title:t.t("text","Delete this attachment")},on:{click:t.onDelete},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon")]},proxy:!0}],null,!1,3930079857)})],1):t._e()]):e("div",{attrs:{contenteditable:"false"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__main",attrs:{src:t.imageUrl,alt:t.alt},on:{click:t.handleImageClick,load:t.onLoaded}})])]],2),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.isMediaAttachment?t._e():e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__caption",attrs:{title:t.alt}},[t.isEditable?e("div",{staticClass:"image__caption__wrapper"},[e("input",{directives:[{name:"show",rawName:"v-show",value:!t.isMediaAttachment,expression:"!isMediaAttachment"}],ref:"altInput",staticClass:"image__caption__input",attrs:{type:"text"},domProps:{value:t.alt},on:{blur:t.updateAlt,keyup:t.updateAlt}}),t._v(" "),t.showImageDeleteIcon?e("div",{staticClass:"image__caption__delete",attrs:{contenteditable:"false"}},[e("NcButton",{attrs:{"aria-label":t.t("text","Delete this image"),title:t.t("text","Delete this image")},on:{click:t.onDelete},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DeleteIcon")]},proxy:!0}],null,!1,3930079857)})],1):t._e()]):e("figcaption",[t._v("\n\t\t\t\t\t\t"+t._s(t.alt)+"\n\t\t\t\t\t")])])]),t._v(" "),e("div",{staticClass:"image__modal"},[e("ShowImageModal",{attrs:{images:t.embeddedImageList,"start-index":t.imageIndex,show:t.showImageModal},on:{close:function(e){t.showImageModal=!1}}})],1)],1):e("div",{staticClass:"image-view__cant_display"},[e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loaded,expression:"loaded"}],staticClass:"image__caption"},[e("input",{ref:"altInput",attrs:{type:"text",disabled:!t.isEditable},domProps:{value:t.alt},on:{blur:t.updateAlt,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateAlt.apply(null,arguments)}}})])])],1),t._v(" "),t.errorMessage?e("small",{staticClass:"image__error-message"},[t._v("\n\t\t\t"+t._s(t.errorMessage)+"\n\t\t")]):t._e()])])}),[],!1,null,"27c2d6f0",null).exports,Be=ue.ZP.extend({selectable:!1,parseHTML(){return[{tag:this.options.allowBase64?"figure img[src]":'figure img[src]:not([src^="data:"])'}]},renderHTML:()=>["img"],addOptions(){return{...this.parent?.()}},addNodeView:()=>(0,I.uf)(Ie),addProseMirrorPlugins:()=>[new l.Sy({props:{handleDrop:(t,e,n)=>{if(e.dataTransfer.files&&e.dataTransfer.files.length>0){const n=t.posAtCoords({left:e.clientX,top:e.clientY}),i=new CustomEvent("file-drop",{bubbles:!0,detail:{files:e.dataTransfer.files,position:n.pos}});return e.target.dispatchEvent(i),!0}},handlePaste:(t,e,n)=>{if(e.clipboardData.files&&e.clipboardData.files.length>0){const t=new CustomEvent("image-paste",{bubbles:!0,detail:{files:e.clipboardData.files}});return e.target.dispatchEvent(t),!0}}}})],toMarkdown(t,e,n,i){e.attrs.alt=e.attrs.alt.toString(),X.Dm.nodes.image(t,e,n,i),t.closeBlock(e)}}),Se=ue.ZP.extend({name:"image-inline",priority:99,selectable:!1,parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},addOptions(){return{...this.parent?.(),inline:!0}},addCommands:()=>({}),addInputRules:()=>[],addNodeView:()=>(0,I.uf)(Ie),toMarkdown:(t,e,n,i)=>X.Dm.nodes.image(t,e,n,i)}),Me=s.vc.create({name:"keep-syntax",parseHTML:()=>[{tag:"span.keep-md"}],renderHTML:()=>["span",{class:"keep-md"},0],toMarkdown:{open:"",close:"",mixable:!0,escape:!1,expelEnclosingWhitespace:!0},onUpdate(){const t=this.editor.state.tr;this.editor.state.doc.descendants(((e,n,i,o)=>{-1!==e.marks.findIndex((t=>t.type.name===this.name))&&("text"===e.type.name&&1===e.text.length||t.removeMark(n,n+e.nodeSize,this.type))})),t.docChanged&&(t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),this.editor.view.dispatch(t))}});const Te={components:{SuggestionListWrapper:i(15039).Z},props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},methods:{onKeyDown(t){let{event:e}=t;return this.$refs.suggestionList?.onKeyDown({event:e})}}};var Ee=i(38049),Ze={};Ze.styleTagTransform=U(),Ze.setAttributes=H(),Ze.insert=$().bind(null,"head"),Ze.domAPI=P(),Ze.insertStyleElement=j();Z()(Ee.Z,Ze);Ee.Z&&Ee.Z.locals&&Ee.Z.locals;const Le=(0,G.Z)(Te,(function(){var t=this,e=t._self._c;return e("SuggestionListWrapper",{ref:"suggestionList",attrs:{command:t.command,items:t.items},on:{select:e=>t.$emit("select",e)},scopedSlots:t._u([{key:"default",fn:function(n){let{item:i}=n;return[e("div",{staticClass:"link-picker__item",attrs:{"data-key":i.key}},["string"!=typeof i.icon?e(i.icon,{tag:"compoent"}):e("img",{attrs:{src:i.icon}}),t._v(" "),e("div",[t._v(t._s(i.label))])],1)]}},{key:"empty",fn:function(){return[t._v("\n\t\t"+t._s(t.t("text","No command found"))+"\n\t")]},proxy:!0}])})}),[],!1,null,"11ad0ffc",null).exports;var Pe=i(78652),Ne=i(17049),$e=i(72076);const De=t("text","Formatting"),He=t("text","Smart picker"),Oe=["task-list","table"],je=t=>{return[...(e=[...Ne.Z.find((t=>"headings"===t.key)).children,...Ne.Z.filter((t=>t.action&&!(t=>["undo","redo","outline","emoji-picker"].indexOf(t.key)>-1)(t))),...Ne.Z.find((t=>"callouts"===t.key)).children,{...Ne.Z.find((t=>"emoji-picker"===t.key)),action:t=>t.insertContent(":")}].filter((e=>e?.label?.toLowerCase?.()?.includes(t.toLowerCase()))).map((t=>({...t,suggestGroup:De})))).filter((t=>Oe.indexOf(t.key)>-1)),...e.filter((t=>-1===Oe.indexOf(t.key)))];var e},Re=new l.H$("linkPicker"),Ue=s.hj.create({name:"linkPicker",addOptions:()=>({suggestion:{char:"/",allowedPrefixes:[" "],pluginKey:Re,allow:t=>{let{state:e,range:n}=t;return"codeBlock"!==e.doc.resolve(n.from).parent.type.name},...(0,Wt.Z)({listComponent:Le,command:t=>{let{editor:e,range:n,props:i}=t;if(i.action){const t=e.chain().deleteRange(n);return i.action(t),void t.run()}(0,Pe.CE)(i.providerId,!0).then((t=>{e.chain().focus().insertContentAt(n,t+" ").run()})).catch((t=>{console.error("Smart picker promise rejected",t)}))},items:t=>{let{editor:e,query:n}=t;return[...(0,Pe.mX)(n).map((t=>({suggestGroup:He,label:t.title,icon:t.icon_url,providerId:t.id}))).filter((t=>t?.label?.toLowerCase?.()?.includes(n.toLowerCase()))),...je(n).filter((t=>{let{action:n,isActive:i}=t;const o=n(e?.can()),a=i&&(0,$e.vK)({isActive:i},e);return o&&!a}))]}})}}),addProseMirrorPlugins(){return[(0,c.q$)({editor:this.editor,...this.options.suggestion})]}});var We=i(34565),ze=i(14068),Ge=i(33907);const Ve={name:"Mention",components:{NcUserBubble:tt.uq,NodeViewWrapper:I.T5},props:{updateAttributes:{type:Function,required:!0},node:{type:Object,required:!0}},data(){return{username:this.node.attrs.label}},computed:{isCurrentUser(){return this.node.attrs.id===(0,Ge.ts)()?.uid}}};var Fe=i(50580),qe={};qe.styleTagTransform=U(),qe.setAttributes=H(),qe.insert=$().bind(null,"head"),qe.domAPI=P(),qe.insertStyleElement=j();Z()(Fe.Z,qe);Fe.Z&&Fe.Z.locals&&Fe.Z.locals;const Ke=(0,G.Z)(Ve,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"mention",attrs:{as:"span",contenteditable:"false"}},[e("NcUserBubble",{staticClass:"mention-user-bubble",attrs:{user:t.node.attrs.id,"display-name":t.username,primary:t.isCurrentUser}},[t._v("\n\t\t@"+t._s(t.username)+"\n\t")])],1)}),[],!1,null,"297bb5fa",null).exports,Ye=ze.ZP.extend({parseHTML:()=>[{tag:'span[data-type="user"]',getAttrs:t=>({id:decodeURIComponent(t.getAttribute("data-id")),label:t.innerText||t.textContent||t.getAttribute("data-label")}),priority:100}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;return["span",(0,s.P1)({"data-type":"user",class:"mention"},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]},addNodeView:()=>(0,I.uf)(Ke),toMarkdown(t,e){t.write(" "),t.write(`@[${e.attrs.label}](mention://user/${encodeURIComponent(e.attrs.id)})`),t.write(" ")}});var Xe=i(51575),Je=i(26022);const Qe={name:"ParagraphView",components:{NodeViewWrapper:I.T5,NodeViewContent:I.ms,NcReferenceList:Pe.ek},props:I.Un,data:()=>({text:null,isLoggedIn:(0,Ge.ts)()}),watch:{node:{handler(t){t?.textContent?this.debouncedUpdateText(t):this.text=""}}},beforeCreate(){this.debouncedUpdateText=Q()((t=>{this.text=this.getTextReference(this.node)}),500)},created(){this.text=this.getTextReference(this.node)},beforeUnmount(){this.debouncedUpdateText?.cancel()},methods:{getTextReference(t){if(!t?.childCount)return null;let e;for(let n=0;n<t.childCount;n++){const i=t.child(n);if("text"!==i.type.name)return null;if(i.textContent.trim()){if(e)return null;e=i}}const n=e?.marks.find((t=>"link"===t.type.name)),i=n?.attrs?.href;return new RegExp(/(^)(https?:\/\/)((?:[-A-Z0-9+_]+\.)+[-A-Z]+(?:\/[-A-Z0-9+&@#%?=~_|!:,.;()]*)*)($)/gi).test(i)?i:null}}};var tn=i(43920),en={};en.styleTagTransform=U(),en.setAttributes=H(),en.insert=$().bind(null,"head"),en.domAPI=P(),en.insertStyleElement=j();Z()(tn.Z,en);tn.Z&&tn.Z.locals&&tn.Z.locals;const nn=(0,G.Z)(Qe,(function(){var t=this,e=t._self._c;return e("NodeViewWrapper",{staticClass:"vue-component",attrs:{as:"p"}},[e("NodeViewContent",{staticClass:"paragraph-content"}),t._v(" "),t.isLoggedIn&&t.text?e("NcReferenceList",{attrs:{text:t.text,limit:1,contenteditable:"false"}}):t._e()],1)}),[],!1,null,"b95f24a4",null).exports,on=Je.Z.extend({addNodeView:()=>(0,I.uf)(nn),parseHTML(){return this.parent().map((t=>Object.assign(t,{preserveWhitespace:"full"})))},addKeyboardShortcuts(){return{Backspace:()=>{const t=this.editor.state.selection;if(0!==t.$from.parentOffset)return!1;const e=t.$from.parent,n=t.$from.index(t.$from.depth-1);if(0===n)return!1;const i=t.$from.node(t.$from.depth-1).child(n-1);return e.type.name===this.name&&i.type.name===this.name&&this.editor.chain().joinBackward().setHardBreak().run()}}}});var an=i(93237);const rn=St;var sn=i(87605);const ln=sn.ZP.extend({addOptions:()=>({nested:!0,HTMLAttributes:{}}),draggable:!1,content:"paragraph block*",addAttributes(){const t={...this.parent()};return t.checked.parseHTML=t=>t.querySelector("input[type=checkbox]")?.checked,t},parseHTML:[{priority:101,tag:"li",getAttrs:t=>t.querySelector("input[type=checkbox]"),context:"taskList/"}],renderHTML(t){let{node:e,HTMLAttributes:n}=t;const i={class:"checkbox-item"},o={type:"checkbox",class:"",contenteditable:!1};return e.attrs.checked&&(o.checked=!0,i.class+=" checked"),["li",(0,s.P1)(n,i),["input",o],["label",0]]},addNodeView:!1,toMarkdown:(t,e)=>{t.write(`[${e.attrs.checked?"x":" "}] `),t.renderContent(e)},addInputRules(){return[...this.parent(),(0,s.S0)({find:/^\s*([-+*])\s(\[(x|X|\s)?\])\s$/,type:this.type,getAttributes:t=>({checked:"xX".includes(t[t.length-1])})})]},addProseMirrorPlugins:()=>[new l.Sy({props:{handleClick:(t,e,n)=>{const i=t.state,o=i.schema,a=t.posAtCoords({left:n.clientX,top:n.clientY}),r=((t,e)=>{for(let n=t.depth;n>0;n--){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}})(i.doc.resolve(a.pos),(function(t){return t.type===o.nodes.taskItem||t.type===o.nodes.listItem}));if(!("li"===n.target.tagName.toLowerCase())||!r||r.node.type!==o.nodes.taskItem||!t.editable)return;const s=i.tr;s.setNodeMarkup(r.pos,o.nodes.taskItem,{checked:!r.node.attrs.checked}),t.dispatch(s)}}})]});const cn=i(63354).Z.extend({parseHTML:[{priority:100,tag:"ul.contains-task-list"}],addAttributes(){return{...this.parent?.(),bullet:{default:"-",rendered:!1,isRequired:!0,parseHTML:t=>t.getAttribute("data-bullet")}}},toMarkdown:(t,e)=>{t.renderList(e,"  ",(()=>`${e.attrs.bullet} `))}});function dn(t){let{types:e,node:n}=t;return Array.isArray(e)&&e.includes(n.type)||n.type===e}const un=s.hj.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:["paragraph"]}),addProseMirrorPlugins(){const t=new l.H$(this.name),e=Object.entries(this.editor.schema.nodes).map((t=>{let[,e]=t;return e})).filter((t=>this.options.notAfter.includes(t.name)));return[new l.Sy({key:t,appendTransaction:(e,n,i)=>{const{doc:o,tr:a,schema:r}=i,s=t.getState(i),l=o.content.size,c=r.nodes[this.options.node];if(s)return a.insert(l,c.create())},state:{init:(t,n)=>!dn({node:n.tr.doc.lastChild,types:e}),apply:(t,n)=>{if(!t.docChanged)return n;return!dn({node:t.doc.lastChild,types:e})}}})]}});var pn=i(73816),An=i(49924),mn=i(79753),hn=i(52029),fn=i(40187);const gn=function(t){const e=t.lastIndexOf("/");return e>0?t.slice(0,e):t.slice(0,e+1)},Cn=function(t,e){const n=t.attrs.href;if(!n)return n;if(!OCA.Viewer)return n;if(n.match(/^[a-zA-Z]*:/))return n;if(n.startsWith("#"))return n;const i=n.match(/^([^?]*)\?fileId=(\d+)/);if(i){const[,t,n]=i,o=function(t,e){if(!e)return t;if("/"===e[0])return e;for(t=t.split("/"),e=e.split("/");".."===e[0]||"."===e[0];)".."===e[0]&&t.pop(),e.shift();return t.concat(e).join("/")}(gn(e||OCA.Viewer?.file||"/"),gn(t));return t.length>1&&t.endsWith("/")?(0,mn.nu)(`/apps/files/?dir=${o}&fileId=${n}`):(0,mn.nu)(`/apps/files/?dir=${o}&openfile=${n}#relPath=${t}`)}return n},vn=function(t){const e=t.getAttribute("href");if(!e)return e;const n=e.match(/\?dir=([^&]*)&openfile=([^&]*)#relPath=([^&]*)/);if(n){const[,,t,e]=n;return`${e}?fileId=${t}`}return e},bn=function(t,e){const n=t.target.closest("a").href,i=OC.parseQueryString(n),o=n.split("#").pop(),a=OC.parseQueryString(o);if(i?.dir&&a?.relPath){const t=a.relPath.split("/").pop(),e=`${i.dir}/${t}`;return document.title=`${t} - ${OC.theme.title}`,window.location.pathname.match(/apps\/files\/$/),void OCA.Viewer.open({path:e})}if(!n.match(/apps\/files\//)||!i?.fileId){if(!fn.Z.validateLink(n))return hn.k.error("Invalid link",{htmlHref:n}),!1;if(o){const t=document.getElementById(o);if(t)return t.scrollIntoView(),void(window.location.hash=o)}return window.open(n),!0}window.open((0,mn.nu)(`/f/${i.fileId}`),"_self")},xn=t=>{let{editor:e,type:n,onClick:i}=t;return new l.Sy({props:{key:new l.H$("textLink"),handleClick:(t,e,o)=>{const a=t.state.doc.resolve(e).marks().find((t=>t.type.name===n.name));return!!a&&(a.attrs.href?0!==o.button||o.ctrlKey?void 0:(o.stopPropagation(),i?.(o,a.attrs)):(hn.k.warn("Could not determine href of link."),hn.k.debug("Link",{link:a}),!1))}}})},yn=An.Z.extend({addOptions(){return{...this.parent?.(),onClick:bn,relativePath:null}},addAttributes:()=>({href:{default:null},title:{default:null}}),inclusive:!1,parseHTML:[{tag:"a[href]",getAttrs:t=>({href:vn(t),title:t.getAttribute("title")})}],renderHTML(t){const{mark:e}=t;return["a",{...e.attrs,href:Cn(e,this.options.relativePath),rel:"noopener noreferrer nofollow"},0]},addProseMirrorPlugins(){const t=this.parent().filter((t=>{let{key:e}=t;return!e.startsWith("handleClickLink")}));return this.options.openOnClick?[...t,xn({editor:this.editor,type:this.type,onClick:this.options.onClick}),new l.Sy({props:{key:new l.H$("textAvoidLinkClick"),handleDOMEvents:{click:(t,e)=>{if(!t.editable)return e.preventDefault(),!1}}}})]:t}}),wn=yn;const _n=i(4281).ZP.extend({parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],renderHTML:()=>["s",0],toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0}});var kn=i(67937);const In=kn.d8.extend({name:"strong",addInputRules(){return[(0,s.Cf)({find:kn.bP,type:this.type})]},addPasteRules(){return[(0,s.K9)({find:kn.lN,type:this.type})]}});const Bn=i(48510).Z.extend({parseHTML:()=>[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],renderHTML:()=>["u",0],toMarkdown:{open:"__",close:"__",mixable:!0,expelEnclosingWhitespace:!0},addInputRules(){return[(0,s.Cf)({find:kn.fJ,type:this.type})]},addPasteRules(){return[(0,s.K9)({find:kn.lD,type:this.type})]}}),Sn=pn.ZP.extend({name:"em"});w.$.registerAlias("plaintext","mermaid");const Mn=s.hj.create({name:"RichText",addOptions:()=>({editing:!0,link:{},extensions:[],component:null,relativePath:null}),addExtensions(){const t=[this.options.editing?v.Z:null,gt.Z,b.Z,on,Xt,ce,In,Sn,_n,_.ZP,q.Z,K.ZP,ft.configure({lowlight:w.$,defaultLanguage:"plaintext"}),k,de.Z,Xe.ZP,We.Z,this.options.editing?Ut:rn,cn,ln,F,Bn,Be,Se,Ct.Z,Yt.Z,Me,Kt,Ye,u.configure({suggestion:(0,Wt.Z)({listComponent:qt,items:t=>{let{query:e}=t;return(0,tt.Kn)(e)},command:t=>{let{editor:e,range:n,props:i}=t;e.chain().focus().insertContentAt(n,i.native+" ").run()}})}),Ue,this.options.editing?an.Z.configure({emptyNodeClass:"is-empty",placeholder:(0,zt.Iu)("text","Add notes, lists or links …"),showOnlyWhenEditable:!0}):null,un];!1!==this.options.link&&t.push(wn.configure({...this.options.link,openOnClick:!0,validate:t=>/^https?:\/\//.test(t),relativePath:this.options.relativePath}));const e=this.options.extensions.map((t=>t.name));return[...t.filter((t=>t&&!e.includes(t.name))),...this.options.extensions]}})},30744:(t,e,n)=>{n.d(e,{F:()=>a,Z:()=>s});var i=n(40591),o=n.n(i);const a=["info","warn","error","success"],r=t=>(e,n,i,o,a)=>{const r=e[n];return 1===r.nesting&&(r.attrSet("data-callout",t),r.attrJoin("class",`callout callout-${t}`)),a.renderToken(e,n,i,o,a)},s=t=>(a.forEach((e=>{t.use(o(),e,{render:r(e)})})),t)},40187:(t,e,n)=>{n.d(e,{Z:()=>x});var i=n(9980),o=n.n(i),a=n(28087),r=n(17251),s=n.n(r);function l(t,e){return t.attrGet("class")?.split(" ").includes(e)||!1}function c(t,e,n){const i=new n("bullet_list_close","ul",-1);i.block=!0;const o=new n("bullet_list_open","ul",1);o.attrSet("class","contains-task-list"),o.block=!0,o.markup=t[e].markup,t.splice(e,0,i,o)}function d(t,e,n){const i=t[e].level+1;for(let o=e+1;o<t.length;o++){const e=t[o];if(e.level<i)return-1;if(e.level===i&&n(t[o]))return o}return-1}var u=n(30744),p=n(43905),A=n.n(p),m=n(1917),h=n.n(m);var f=n(66661),g=n.n(f),C=n(65495),v=n(67022);const b=o()("commonmark",{html:!1,breaks:!1}).enable("strikethrough").enable("table").use(a.Z,{enable:!0,labelAfter:!0}).use(g(),(t=>{})).use((function(t){t.core.ruler.after("task-lists","split-mixed-task-lists",(t=>{const e=t.tokens;for(let n=0;n<e.length;n++){const i=e[n];if(!l(i,"contains-task-list"))continue;const o=l(e[n+1],"task-list-item");o||(i.attrs.splice(i.attrIndex("class")),0===i.attrs.length&&(i.attrs=null));const a=d(e,n,(t=>1===t.nesting&&l(t,"task-list-item")!==o));a>n&&c(e,a,t.Token)}return!1}))})).use((function(t){t.inline.ruler2.after("emphasis","underline",(t=>{const e=t.tokens;for(let t=e.length-1;t>0;t--){const n=e[t];"__"===n.markup&&("strong_open"===n.type&&(e[t].tag="u",e[t].type="u_open"),"strong_close"===n.type&&(e[t].tag="u",e[t].type="u_close"))}return!1}))})).use((function(t){t.inline.ruler.at("newline",((t,e)=>{const n=A()(t,e);return n&&t.tokens.length&&"hardbreak"===t.tokens[t.tokens.length-1].type&&t.tokens[t.tokens.length-1].attrSet("syntax","  "),n})),t.inline.ruler.at("escape",((t,e)=>{const n=h()(t,e);return n&&t.tokens.length&&"hardbreak"===t.tokens[t.tokens.length-1].type&&t.tokens[t.tokens.length-1].attrSet("syntax","\\"),n})),t.inline.ruler.after("html_inline","html_breaks",(t=>{const e=t.src.slice(t.pos).match(/^\s*<br\s*\/?>/);if(e){return t.push("hardbreak","br",0).attrPush(["syntax","html"]),t.pos+=e[0].length,!0}return!1})),t.renderer.rules.hardbreak=(t,e,n)=>`<br data-syntax="${t[e].attrGet("syntax")}" ${n.xhtmlOut?"/":""}>`})).use(u.Z).use((function(t){const e=/(\n(?<linestart>[#\-*+>])|(?<special>[`*\\~[\]]+))/;t.core.ruler.before("text_join","tag-markdown-syntax",(t=>{const n=new t.Token("keep_md_open","span",1);n.attrSet("class","keep-md");const i=new t.Token("keep_md_close","span",-1);for(let o=0;o<t.tokens.length;o++){const a=t.tokens[o];if("inline"===a.type)for(let t=0;t<a.children.length;t++){const o=a.children[t];if("text"===o.type){const r=e.exec(o.content);if(r){const e=r.groups.linestart?r.index+1:r.index,s=e+(r.groups.linestart??r.groups.special).length;a.children.splice(t,1,Object.assign({},o,{content:o.content.slice(0,e)}),Object.assign({},n),Object.assign({},o,{content:o.content.slice(e,s)}),Object.assign({},i),Object.assign({},o,{content:o.content.slice(s)})),t+=3}}}}return!1}))})).use(s()).use(C.Z);b.renderer.rules.front_matter=(t,e,n)=>`<pre id="frontmatter"><code>${(0,v.escapeHtml)(t[e].meta)}</code></pre>`,b.renderer.rules.bullet_list_open=(t,e,n)=>(t[e].attrs=[...t[e].attrs||[],["data-bullet",t[e].markup]],b.renderer.renderToken(t,e,n));const x=b},13815:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(25030);const o={data:()=>({$store:i.default}),beforeMount(){void 0===this.$store?this.$store=i.default:this.$store.hasModule("text")||this.$store.registerModule("text",i.D)}}},97646:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".text-menubar button.entry-action__button,.v-popper__inner button.entry-action__button{height:44px;margin:0;border:0;position:relative;background-color:rgba(0,0,0,0);vertical-align:top;box-shadow:none;padding:0}.text-menubar button.entry-action__button p,.v-popper__inner button.entry-action__button p{padding:0}.text-menubar button.entry-action__button:is(li.entry-action-item button),.v-popper__inner button.entry-action__button:is(li.entry-action-item button){padding:0 .5em 0 0}.text-menubar button.entry-action__button:not(li.entry-action-item button),.v-popper__inner button.entry-action__button:not(li.entry-action-item button){width:44px}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.text-menubar button.entry-action__button:active,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus,.v-popper__inner button.entry-action__button:active{background-color:var(--color-background-dark)}.text-menubar button.entry-action__button:hover:not(:disabled),.text-menubar button.entry-action__button:focus:not(:disabled),.text-menubar button.entry-action__button:active:not(:disabled),.v-popper__inner button.entry-action__button:hover:not(:disabled),.v-popper__inner button.entry-action__button:focus:not(:disabled),.v-popper__inner button.entry-action__button:active:not(:disabled){box-shadow:var(--color-primary-element)}.text-menubar button.entry-action__button:hover,.text-menubar button.entry-action__button:focus,.v-popper__inner button.entry-action__button:hover,.v-popper__inner button.entry-action__button:focus{opacity:1}.text-menubar button.entry-action__button:focus-visible,.v-popper__inner button.entry-action__button:focus-visible{box-shadow:var(--color-primary-element)}.text-menubar .button-vue,.v-popper__inner .button-vue{margin-right:2px}@media only screen and (max-width: 767px){.text-menubar .button-vue,.v-popper__inner .button-vue{margin-right:0}}.text-menubar .action-item__menutoggle.action-item__menutoggle--with-icon-slot,.v-popper__inner .action-item__menutoggle.action-item__menutoggle--with-icon-slot{opacity:1}","",{version:3,sources:["webpack://./src/components/Menu/ActionEntry.scss"],names:[],mappings:"AACC,uFACC,WAAA,CACA,QAAA,CACA,QAAA,CAEA,iBAAA,CACA,8BAAA,CACA,kBAAA,CACA,eAAA,CACA,SAAA,CAEA,2FACC,SAAA,CAGD,uJACC,kBAAA,CAGD,yJACC,UAAA,CAGD,2SAGC,6CAAA,CACA,qYACC,uCAAA,CAIF,sMAEC,SAAA,CAED,mHACC,uCAAA,CAKF,uDACC,gBAAA,CAGD,0CACC,uDACC,cAAA,CAAA,CAIF,iKACC,SAAA",sourcesContent:[".text-menubar, .v-popper__inner {\n\tbutton.entry-action__button {\n\t\theight: 44px;\n\t\tmargin: 0;\n\t\tborder: 0;\n\t\t// opacity: 0.5;\n\t\tposition: relative;\n\t\tbackground-color: transparent;\n\t\tvertical-align: top;\n\t\tbox-shadow: none;\n\t\tpadding: 0;\n\n\t\tp {\n\t\t\tpadding: 0;\n\t\t}\n\n\t\t&:is(li.entry-action-item button) {\n\t\t\tpadding: 0 0.5em 0 0;\n\t\t}\n\n\t\t&:not(li.entry-action-item button) {\n\t\t\twidth: 44px;\n\t\t}\n\n\t\t&:hover,\n\t\t&:focus,\n\t\t&:active {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t\t&:not(:disabled) {\n\t\t\t\tbox-shadow: var(--color-primary-element);\n\t\t\t}\n\t\t}\n\n\t\t&:hover,\n\t\t&:focus {\n\t\t\topacity: 1;\n\t\t}\n\t\t&:focus-visible {\n\t\t\tbox-shadow: var(--color-primary-element);\n\t\t}\n\n\t}\n\n\t.button-vue {\n\t\tmargin-right: 2px;\n\t}\n\n\t@media only screen and (max-width: 767px) {\n\t\t.button-vue {\n\t\t\tmargin-right: 0;\n\t\t}\n\t}\n\n\t.action-item__menutoggle.action-item__menutoggle--with-icon-slot {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const s=r},99235:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".editor--outline[data-v-4a57d3b2]{width:300px;padding:0 10px 10px 10px;position:fixed;overflow:auto;max-height:calc(100% - 204px)}.editor--outline-mobile[data-v-4a57d3b2]{box-shadow:8px 0 17px -19px var(--color-box-shadow);background-color:var(--color-main-background-translucent);z-index:1}.editor--outline__header[data-v-4a57d3b2]{margin:0;position:sticky;top:0;z-index:1;background-color:var(--color-main-background);padding:.6em .6em .6em 0;display:flex;align-items:center}.editor--outline__header h2[data-v-4a57d3b2]{font-size:1rem;line-height:1.1rem;flex-grow:1;padding:0;margin:0}","",{version:3,sources:["webpack://./src/components/Editor/EditorOutline.vue"],names:[],mappings:"AACA,kCACC,WAAA,CACA,wBAAA,CACA,cAAA,CACA,aAAA,CAEA,6BAAA,CAEA,yCACC,mDAAA,CACA,yDAAA,CACA,SAAA,CAGD,0CACC,QAAA,CACA,eAAA,CACA,KAAA,CACA,SAAA,CACA,6CAAA,CACA,wBAAA,CACA,YAAA,CACA,kBAAA,CAEA,6CACC,cAAA,CACA,kBAAA,CACA,WAAA,CACA,SAAA,CACA,QAAA",sourcesContent:["\n.editor--outline {\n\twidth:  300px;\n\tpadding: 0 10px 10px 10px;\n\tposition: fixed;\n\toverflow: auto;\n\t// 204px = 50px nc header + 60px collectives titlebar + 44px menubar + 50px bottom margin\n\tmax-height: calc(100% - 204px);\n\n\t&-mobile {\n\t\tbox-shadow: 8px 0 17px -19px var(--color-box-shadow);\n\t\tbackground-color: var(--color-main-background-translucent);\n\t\tz-index: 1;\n\t}\n\n\t&__header {\n\t\tmargin: 0;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 1;\n\t\tbackground-color: var(--color-main-background);\n\t\tpadding: 0.6em 0.6em 0.6em 0;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\th2 {\n\t\t\tfont-size: 1rem;\n\t\t\tline-height: 1.1rem;\n\t\t\tflex-grow: 1;\n\t\t\tpadding: 0;\n\t\t\tmargin: 0;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},35522:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".--initial-render .editor--toc__item{--initial-padding-left: 0;animation:initialPadding 1.5s}.editor--toc{padding:0 10px;color:var(--color-main-text-maxcontrast);--animation-duration: 0.8s}.editor--toc h3{padding-left:.75rem}.editor--toc__list{width:100%;list-style:none;font-size:.9rem;padding:0;animation-name:fadeInLeft;animation-duration:var(--animation-duration)}.editor--toc__item{transform:translateX(var(--padding-left, 0rem));text-overflow:ellipsis;overflow:hidden;white-space:nowrap;animation:initialPadding calc(var(--animation-duration)*2);width:calc(100% - var(--padding-left))}.editor--toc__item a:hover{color:var(--color-primary-element-hover)}.editor--toc__item--1{--padding-left: 0rem;font-weight:600}.editor--toc__item--1:not(:nth-child(1)){margin-top:.5rem}.editor--toc__item--2{--padding-left: 1rem}.editor--toc__item--3{--padding-left: 2rem}.editor--toc__item--4{--padding-left: 3rem}.editor--toc__item--5{--padding-left: 4rem}.editor--toc__item--6{--padding-left: 5rem}.editor--toc__item--previous-1{--initial-padding-left: 0rem }.editor--toc__item--previous-2{--initial-padding-left: 1rem }.editor--toc__item--previous-3{--initial-padding-left: 2rem }.editor--toc__item--previous-4{--initial-padding-left: 3rem }.editor--toc__item--previous-5{--initial-padding-left: 4rem }.editor--toc__item--previous-6{--initial-padding-left: 5rem }@keyframes initialPadding{from{transform:translateX(var(--initial-padding-left, initial))}to{transform:translateX(var(--padding-left, 0rem))}}","",{version:3,sources:["webpack://./src/components/Editor/TableOfContents.vue"],names:[],mappings:"AAGE,qCACC,yBAAA,CACA,6BAAA,CAKH,aACC,cAAA,CACA,wCAAA,CACA,0BAAA,CAEA,gBACC,mBAAA,CAGD,mBACC,UAAA,CACA,eAAA,CACA,eAAA,CACA,SAAA,CAEA,yBAAA,CACA,4CAAA,CAGD,mBACC,+CAAA,CACA,sBAAA,CACA,eAAA,CACA,kBAAA,CACA,0DAAA,CACA,sCAAA,CAEA,2BACC,wCAAA,CAGD,sBACC,oBAAA,CACA,eAAA,CACA,yCACC,gBAAA,CAIF,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,sBACC,oBAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAGD,+BACC,6BAAA,CAKH,0BACE,KACD,0DAAA,CAGC,GACD,+CAAA,CAAA",sourcesContent:["\n.--initial-render {\n\t.editor--toc {\n\t\t&__item {\n\t\t\t--initial-padding-left: 0;\n\t\t\tanimation: initialPadding 1.5s;\n\t\t}\n\t}\n}\n\n.editor--toc {\n\tpadding: 0 10px;\n\tcolor: var(--color-main-text-maxcontrast);\n\t--animation-duration: 0.8s;\n\n\th3 {\n\t\tpadding-left: 0.75rem;\n\t}\n\n\t&__list {\n\t\twidth: 100%;\n\t\tlist-style: none;\n\t\tfont-size: 0.9rem;\n\t\tpadding: 0;\n\n\t\tanimation-name: fadeInLeft;\n\t\tanimation-duration: var(--animation-duration);\n\t}\n\n\t&__item {\n\t\ttransform: translateX(var(--padding-left, 0rem));\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden;\n\t\twhite-space: nowrap;\n\t\tanimation: initialPadding calc(var(--animation-duration) * 2);\n\t\twidth: calc(100% - var(--padding-left));\n\n\t\ta:hover {\n\t\t\tcolor: var(--color-primary-element-hover);\n\t\t}\n\n\t\t&--1 {\n\t\t\t--padding-left: 0rem;\n\t\t\tfont-weight: 600;\n\t\t\t&:not(:nth-child(1)) {\n\t\t\t\tmargin-top: 0.5rem;\n\t\t\t}\n\t\t}\n\n\t\t&--2 {\n\t\t\t--padding-left: 1rem;\n\t\t}\n\n\t\t&--3 {\n\t\t\t--padding-left: 2rem;\n\t\t}\n\n\t\t&--4 {\n\t\t\t--padding-left: 3rem;\n\t\t}\n\n\t\t&--5 {\n\t\t\t--padding-left: 4rem;\n\t\t}\n\n\t\t&--6 {\n\t\t\t--padding-left: 5rem;\n\t\t}\n\n\t\t&--previous-1 {\n\t\t\t--initial-padding-left: 0rem\n\t\t}\n\n\t\t&--previous-2 {\n\t\t\t--initial-padding-left: 1rem\n\t\t}\n\n\t\t&--previous-3 {\n\t\t\t--initial-padding-left: 2rem\n\t\t}\n\n\t\t&--previous-4 {\n\t\t\t--initial-padding-left: 3rem\n\t\t}\n\n\t\t&--previous-5 {\n\t\t\t--initial-padding-left: 4rem\n\t\t}\n\n\t\t&--previous-6 {\n\t\t\t--initial-padding-left: 5rem\n\t\t}\n\t}\n}\n\n@keyframes initialPadding {\n  from {\n\ttransform: translateX(var(--initial-padding-left, initial));\n  }\n\n  to {\n\ttransform: translateX(var(--padding-left, 0rem));\n  }\n}\n\n"],sourceRoot:""}]);const s=r},62657:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".modal__content[data-v-403f8ff2]{height:80vh;padding:0 50px;display:flex;justify-content:center}.modal__content img[data-v-403f8ff2]{width:100%;height:100%;object-fit:contain}","",{version:3,sources:["webpack://./src/components/ImageView/ShowImageModal.vue"],names:[],mappings:"AACA,iCACC,WAAA,CACA,cAAA,CACA,YAAA,CACA,sBAAA,CACA,qCACC,UAAA,CACA,WAAA,CACA,kBAAA",sourcesContent:["\n.modal__content {\n\theight: 80vh;\n\tpadding: 0 50px;\n\tdisplay: flex;\n\tjustify-content: center;\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tobject-fit: contain;\n\t}\n}\n"],sourceRoot:""}]);const s=r},35437:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".emoji-list[data-v-74f9a54a]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:200px;padding:4px;max-height:195.5px;margin:5px 0}.emoji-list__item[data-v-74f9a54a]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.emoji-list__item[data-v-74f9a54a]:last-child{margin-bottom:0}.emoji-list__item__emoji[data-v-74f9a54a]{padding-right:8px}.emoji-list__item.is-selected[data-v-74f9a54a],.emoji-list__item[data-v-74f9a54a]:focus,.emoji-list__item[data-v-74f9a54a]:hover{opacity:1;background-color:var(--color-primary-element-light)}","",{version:3,sources:["webpack://./src/components/Suggestion/Emoji/EmojiList.vue"],names:[],mappings:"AACA,6BACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,mCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,8CACC,eAAA,CAGD,0CACC,iBAAA,CAGD,iIAGC,SAAA,CACA,mDAAA",sourcesContent:["\n.emoji-list {\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--color-main-background);\n\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\toverflow: auto;\n\n\tmin-width: 200px;\n\tmax-width: 200px;\n\tpadding: 4px;\n\t// Show maximum 5 entries and a half to show scroll\n\tmax-height: 35.5px * 5 + 18px;\n\tmargin: 5px 0;\n\n\t&__item {\n\t\tborder-radius: 8px;\n\t\tpadding: 4px 8px;\n\t\tmargin-bottom: 4px;\n\t\topacity: 0.8;\n\t\tcursor: pointer;\n\n\t\t// Take care of long names\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t&__emoji {\n\t\t\tpadding-right: 8px;\n\t\t}\n\n\t\t&.is-selected,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},38049:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".link-picker__item[data-v-11ad0ffc]{display:flex;align-items:center}.link-picker__item>div[data-v-11ad0ffc]{padding:4px;padding-left:8px;overflow:hidden;text-overflow:ellipsis}.link-picker__item img[data-v-11ad0ffc]{width:20px;height:20px;filter:var(--background-invert-if-dark)}","",{version:3,sources:["webpack://./src/components/Suggestion/LinkPicker/LinkPickerList.vue"],names:[],mappings:"AACA,oCACC,YAAA,CACA,kBAAA,CAEA,wCACC,WAAA,CACA,gBAAA,CACA,eAAA,CACA,sBAAA,CAGD,wCACC,UAAA,CACA,WAAA,CACA,uCAAA",sourcesContent:["\n.link-picker__item {\n\tdisplay: flex;\n\talign-items: center;\n\n\t& > div {\n\t\tpadding: 4px;\n\t\tpadding-left: 8px;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t}\n\n\timg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tfilter: var(--background-invert-if-dark);\n\t}\n}\n"],sourceRoot:""}]);const s=r},37115:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".suggestion-list[data-v-721c3a10]{border-radius:var(--border-radius);background-color:var(--color-main-background);box-shadow:0 1px 5px var(--color-box-shadow);overflow:auto;min-width:200px;max-width:400px;width:80vw;padding:4px;max-height:195.5px;margin:5px 0}.suggestion-list__group[data-v-721c3a10]{font-weight:bold;color:var(--color-primary-element);font-size:var(--default-font-size);line-height:44px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.7;box-shadow:none !important;flex-shrink:0;padding-left:8px}.suggestion-list__item[data-v-721c3a10]{border-radius:8px;padding:4px 8px;margin-bottom:4px;opacity:.8;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.suggestion-list__item[data-v-721c3a10]:last-child{margin-bottom:0}.suggestion-list__item__emoji[data-v-721c3a10]{padding-right:8px}.suggestion-list__item.is-selected[data-v-721c3a10],.suggestion-list__item[data-v-721c3a10]:focus,.suggestion-list__item[data-v-721c3a10]:hover{opacity:1;background-color:var(--color-primary-element-light)}","",{version:3,sources:["webpack://./src/components/Suggestion/SuggestionListWrapper.vue"],names:[],mappings:"AACA,kCACC,kCAAA,CACA,6CAAA,CACA,4CAAA,CACA,aAAA,CAEA,eAAA,CACA,eAAA,CACA,UAAA,CACA,WAAA,CAEA,kBAAA,CACA,YAAA,CAEA,yCACC,gBAAA,CACA,kCAAA,CACA,kCAAA,CACA,gBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,UAAA,CACA,0BAAA,CACA,aAAA,CACA,gBAAA,CAGD,wCACC,iBAAA,CACA,eAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGA,kBAAA,CACA,eAAA,CACA,sBAAA,CAEA,mDACC,eAAA,CAGD,+CACC,iBAAA,CAGD,gJAGC,SAAA,CACA,mDAAA",sourcesContent:["\n.suggestion-list {\n\tborder-radius: var(--border-radius);\n\tbackground-color: var(--color-main-background);\n\tbox-shadow: 0 1px 5px var(--color-box-shadow);\n\toverflow: auto;\n\n\tmin-width: 200px;\n\tmax-width: 400px;\n\twidth: 80vw;\n\tpadding: 4px;\n\t// Show maximum 5 entries and a half to show scroll\n\tmax-height: 35.5px * 5 + 18px;\n\tmargin: 5px 0;\n\n\t&__group {\n\t\tfont-weight: bold;\n\t\tcolor: var(--color-primary-element);\n\t\tfont-size: var(--default-font-size);\n\t\tline-height: 44px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\topacity: .7;\n\t\tbox-shadow: none !important;\n\t\tflex-shrink: 0;\n\t\tpadding-left: 8px;\n\t}\n\n\t&__item {\n\t\tborder-radius: 8px;\n\t\tpadding: 4px 8px;\n\t\tmargin-bottom: 4px;\n\t\topacity: 0.8;\n\t\tcursor: pointer;\n\n\t\t// Take care of long names\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\n\t\t&__emoji {\n\t\t\tpadding-right: 8px;\n\t\t}\n\n\t\t&.is-selected,\n\t\t&:focus,\n\t\t&:hover {\n\t\t\topacity: 1;\n\t\t\tbackground-color: var(--color-primary-element-light);\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},94629:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".callout[data-v-b470ea6a]{background-color:var(--callout-background, var(--color-background-hover));border-left-color:var(--callout-border, var(--color-primary-element));border-radius:var(--border-radius);padding:1em;padding-left:.5em;border-left-width:.3em;border-left-style:solid;position:relative;margin-bottom:.5em;display:flex;align-items:center;justify-content:flex-start}.callout+*[data-v-b470ea6a]{margin-top:.5em}.callout .callout__content[data-v-b470ea6a]{margin-left:1em}.callout .callout__content[data-v-b470ea6a] p .paragraph-content:last-child{margin-bottom:0}.callout .callout__icon[data-v-b470ea6a],.callout .callout__icon[data-v-b470ea6a] svg{color:var(--callout-border)}.callout[data-v-b470ea6a],.callout--info[data-v-b470ea6a]{--callout-border: var(--color-info, #006aa3)}.callout--warn[data-v-b470ea6a]{--callout-border: var(--color-warning)}.callout--error[data-v-b470ea6a]{--callout-border: var(--color-error)}.callout--success[data-v-b470ea6a]{--callout-border: var(--color-success)}","",{version:3,sources:["webpack://./src/nodes/Callout.vue"],names:[],mappings:"AACA,0BACC,yEAAA,CACA,qEAAA,CACA,kCAAA,CACA,WAAA,CACA,iBAAA,CACA,sBAAA,CACA,uBAAA,CACA,iBAAA,CACA,kBAAA,CAEA,YAAA,CACA,kBAAA,CACA,0BAAA,CAEA,4BACC,eAAA,CAGD,4CACC,eAAA,CAEC,4EACC,eAAA,CAMF,sFACC,2BAAA,CAKF,0DACC,4CAAA,CAID,gCACC,sCAAA,CAID,iCACC,oCAAA,CAID,mCACC,sCAAA",sourcesContent:["\n.callout {\n\tbackground-color: var(--callout-background, var(--color-background-hover));\n\tborder-left-color: var(--callout-border, var(--color-primary-element));\n\tborder-radius: var(--border-radius);\n\tpadding: 1em;\n\tpadding-left: 0.5em;\n\tborder-left-width: 0.3em;\n\tborder-left-style: solid;\n\tposition: relative;\n\tmargin-bottom: 0.5em;\n\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: flex-start;\n\n\t&+ * {\n\t\tmargin-top: 0.5em;\n\t}\n\n\t.callout__content {\n\t\tmargin-left: 1em;\n\t\t&:deep(p .paragraph-content) {\n\t\t\t&:last-child {\n\t\t\t\tmargin-bottom: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.callout__icon {\n\t\t&, :deep(svg) {\n\t\t\tcolor: var(--callout-border);\n\t\t}\n\t}\n\n\t// Info (default) variables\n\t&, &--info {\n\t\t--callout-border: var(--color-info, #006aa3);\n\t}\n\n\t// Warn variables\n\t&--warn {\n\t\t--callout-border: var(--color-warning);\n\t}\n\n\t// Error variables\n\t&--error {\n\t\t--callout-border: var(--color-error);\n\t}\n\n\t// Success variables\n\t&--success {\n\t\t--callout-border: var(--color-success);\n\t}\n}\n"],sourceRoot:""}]);const s=r},17416:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".code-block[data-v-75402d1e]{background-color:var(--color-background-dark)}.code-block-header[data-v-75402d1e]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;position:absolute;right:12px;margin-top:4px}.split-view[data-v-75402d1e]{display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;gap:12px}.split-view>*[data-v-75402d1e]{flex:1}.split-view__preview[data-v-75402d1e]{text-align:center}@media only screen and (max-width: 600px){.split-view[data-v-75402d1e]{flex-direction:column}}.view-switch[data-v-75402d1e]{display:flex;flex-direction:row}","",{version:3,sources:["webpack://./src/nodes/CodeBlockView.vue"],names:[],mappings:"AACA,6BACC,6CAAA,CAGD,oCACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAGD,6BACC,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,mBAAA,CACA,QAAA,CAEA,+BACC,MAAA,CAGD,sCACC,iBAAA,CAIF,0CACC,6BACC,qBAAA,CAAA,CAIF,8BACC,YAAA,CACA,kBAAA",sourcesContent:["\n.code-block {\n\tbackground-color: var(--color-background-dark);\n}\n\n.code-block-header {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tposition: absolute;\n\tright: 12px;\n\tmargin-top: 4px;\n}\n\n.split-view {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\talign-items: stretch;\n\tgap: 12px;\n\n\t& > * {\n\t\tflex: 1;\n\t}\n\n\t&__preview {\n\t\ttext-align: center;\n\t}\n}\n\n@media only screen and (max-width: 600px) {\n\t.split-view {\n\t\tflex-direction: column;\n\t}\n}\n\n.view-switch {\n\tdisplay: flex;\n\tflex-direction: row;\n}\n"],sourceRoot:""}]);const s=r},37204:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".image[data-v-27c2d6f0]{margin:0;padding:0}.image[data-v-27c2d6f0],.image *[data-v-27c2d6f0]{-webkit-user-modify:read-only !important}.image__caption[data-v-27c2d6f0]{text-align:center;color:var(--color-text-lighter);display:flex;align-items:center;justify-content:center}.image__caption__wrapper[data-v-27c2d6f0]{position:relative}.image__caption__delete[data-v-27c2d6f0]{display:flex;flex-basis:20%;align-items:center;width:20px !important;height:20px;position:absolute;bottom:-1px;right:-3px}.image__caption__delete[data-v-27c2d6f0],.image__caption__delete svg[data-v-27c2d6f0]{cursor:pointer}.image__caption .image__caption__wrapper[data-v-27c2d6f0]{flex-basis:80%}.image__caption input[type=text][data-v-27c2d6f0]{width:85%;text-align:center;background-color:rgba(0,0,0,0);border:none !important;color:var(--color-text-maxcontrast) !important}.image__caption input[type=text][data-v-27c2d6f0]:focus{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.image__caption figcaption[data-v-27c2d6f0]{color:var(--color-text-maxcontrast) !important;max-width:80%;text-align:center;width:fit-content}.image__loading[data-v-27c2d6f0]{height:100px}.image__main[data-v-27c2d6f0]{max-height:calc(100vh - 50px - 50px)}.image__main--broken-icon[data-v-27c2d6f0],.image__error-message[data-v-27c2d6f0]{color:var(--color-text-maxcontrast)}.image__error-message[data-v-27c2d6f0]{display:block;text-align:center}.image__view[data-v-27c2d6f0]{text-align:center;position:relative}.image__view img[data-v-27c2d6f0]{max-width:100%}.image__view:hover input[type=text][data-v-27c2d6f0]{border:2px solid var(--color-border-dark) !important;color:var(--color-main-text) !important}.media[data-v-27c2d6f0]{display:flex;align-items:center;justify-content:left}.media .media__wrapper[data-v-27c2d6f0]{display:flex;border:2px solid var(--color-border);border-radius:var(--border-radius-large);padding:8px}.media .media__wrapper img[data-v-27c2d6f0]{width:44px;height:44px}.media .media__wrapper .metadata[data-v-27c2d6f0]{margin-left:8px;display:flex;flex-direction:column;align-items:start}.media .media__wrapper .metadata span[data-v-27c2d6f0]{line-height:20px;font-weight:normal}.media .media__wrapper .metadata span.size[data-v-27c2d6f0]{color:var(--color-text-maxcontrast)}.media .buttons[data-v-27c2d6f0]{margin-left:8px}.fade-enter-active[data-v-27c2d6f0]{transition:opacity .3s ease-in-out}.fade-enter-to[data-v-27c2d6f0]{opacity:1}.fade-enter[data-v-27c2d6f0]{opacity:0}","",{version:3,sources:["webpack://./src/nodes/ImageView.vue"],names:[],mappings:"AACA,wBACC,QAAA,CACA,SAAA,CAEA,kDACC,wCAAA,CAIF,iCACC,iBAAA,CACA,+BAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,0CACC,iBAAA,CAED,yCACC,YAAA,CACA,cAAA,CACA,kBAAA,CACA,qBAAA,CACA,WAAA,CACA,iBAAA,CACA,WAAA,CACA,UAAA,CACA,sFACC,cAAA,CAGF,0DACC,cAAA,CAED,kDACC,SAAA,CACA,iBAAA,CACA,8BAAA,CACA,sBAAA,CACA,8CAAA,CAEA,wDACC,oDAAA,CACA,uCAAA,CAGF,4CACC,8CAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CAIF,iCACC,YAAA,CAGD,8BACC,oCAAA,CAGD,kFACC,mCAAA,CAGD,uCACC,aAAA,CACA,iBAAA,CAGD,8BACC,iBAAA,CACA,iBAAA,CAEA,kCACC,cAAA,CAIA,qDACC,oDAAA,CACA,uCAAA,CAKH,wBACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,wCACC,YAAA,CACA,oCAAA,CACA,wCAAA,CACA,WAAA,CAEA,4CACC,UAAA,CACA,WAAA,CAGD,kDACC,eAAA,CACA,YAAA,CACA,qBAAA,CACA,iBAAA,CAEA,uDACC,gBAAA,CACA,kBAAA,CAEA,4DACC,mCAAA,CAKJ,iCACC,eAAA,CAIF,oCACC,kCAAA,CAGD,gCACC,SAAA,CAGD,6BACC,SAAA",sourcesContent:["\n.image {\n\tmargin: 0;\n\tpadding: 0;\n\n\t&, * {\n\t\t-webkit-user-modify: read-only !important;\n\t}\n}\n\n.image__caption {\n\ttext-align: center;\n\tcolor: var(--color-text-lighter);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\t&__wrapper {\n\t\tposition: relative;\n\t}\n\t&__delete {\n\t\tdisplay: flex;\n\t\tflex-basis: 20%;\n\t\talign-items: center;\n\t\twidth: 20px !important;\n\t\theight: 20px;\n\t\tposition: absolute;\n\t\tbottom: -1px;\n\t\tright: -3px;\n\t\t&, svg {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\t.image__caption__wrapper {\n\t\tflex-basis: 80%;\n\t}\n\tinput[type='text'] {\n\t\twidth: 85%;\n\t\ttext-align: center;\n\t\tbackground-color: transparent;\n\t\tborder: none !important;\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\n\t\t&:focus {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n\tfigcaption {\n\t\tcolor: var(--color-text-maxcontrast) !important;\n\t\tmax-width: 80%;\n\t\ttext-align: center;\n\t\twidth: fit-content;\n\t}\n}\n\n.image__loading {\n\theight: 100px;\n}\n\n.image__main {\n\tmax-height: calc(100vh - 50px - 50px);\n}\n\n.image__main--broken-icon, .image__error-message {\n\tcolor: var(--color-text-maxcontrast);\n}\n\n.image__error-message {\n\tdisplay: block;\n\ttext-align: center;\n}\n\n.image__view {\n\ttext-align: center;\n\tposition: relative;\n\n\timg {\n\t\tmax-width: 100%;\n\t}\n\n\t&:hover {\n\t\tinput[type='text'] {\n\t\t\tborder: 2px solid var(--color-border-dark) !important;\n\t\t\tcolor: var(--color-main-text) !important;\n\t\t}\n\t}\n}\n\n.media {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: left;\n\t.media__wrapper {\n\t\tdisplay: flex;\n\t\tborder: 2px solid var(--color-border);\n\t\tborder-radius: var(--border-radius-large);\n\t\tpadding: 8px;\n\n\t\timg {\n\t\t\twidth: 44px;\n\t\t\theight: 44px;\n\t\t}\n\n\t\t.metadata {\n\t\t\tmargin-left: 8px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\talign-items: start;\n\n\t\t\tspan {\n\t\t\t\tline-height: 20px;\n\t\t\t\tfont-weight: normal;\n\n\t\t\t\t&.size {\n\t\t\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.buttons {\n\t\tmargin-left: 8px;\n\t}\n}\n\n.fade-enter-active {\n\ttransition: opacity .3s ease-in-out;\n}\n\n.fade-enter-to {\n\topacity: 1;\n}\n\n.fade-enter {\n\topacity: 0;\n}\n"],sourceRoot:""}]);const s=r},43920:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,"[data-v-b95f24a4] div.widgets--list a.widget-default{color:var(--color-main-text);padding:0;text-decoration:none;max-width:calc(100vw - 56px)}[data-v-b95f24a4] .widget-default--details{overflow:hidden}[data-v-b95f24a4] .widget-default--details p{margin-bottom:4px !important}","",{version:3,sources:["webpack://./src/nodes/ParagraphView.vue"],names:[],mappings:"AACA,qDACC,4BAAA,CACA,SAAA,CACA,oBAAA,CACA,4BAAA,CAGD,2CACC,eAAA,CACA,6CACC,4BAAA",sourcesContent:["\n:deep(div.widgets--list a.widget-default) {\n\tcolor: var(--color-main-text);\n\tpadding: 0;\n\ttext-decoration: none;\n\tmax-width: calc(100vw - 56px);\n}\n\n:deep(.widget-default--details) {\n\toverflow:hidden;\n\tp {\n\t\tmargin-bottom: 4px !important;\n\t}\n}\n"],sourceRoot:""}]);const s=r},59861:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,"td[data-v-2f56cd8c]{position:relative}td .container[data-v-2f56cd8c]{display:flex;flex-wrap:wrap;min-height:36px}td .content[data-v-2f56cd8c]{flex:1 1 0;margin:0;padding-top:.6em}td .action-item[data-v-2f56cd8c]{position:absolute;right:-48px;flex:0 1 auto;display:none;top:2px}td:last-child .action-item[data-v-2f56cd8c]{display:block;opacity:50%}td:last-child:hover .action-item[data-v-2f56cd8c],td:last-child:active .action-item[data-v-2f56cd8c],td:last-child:focus .action-item[data-v-2f56cd8c],td:last-child:focus-within .action-item[data-v-2f56cd8c]{opacity:100%}","",{version:3,sources:["webpack://./src/nodes/Table/TableCellView.vue"],names:[],mappings:"AACA,oBACC,iBAAA,CAEA,+BACC,YAAA,CACA,cAAA,CACA,eAAA,CAGD,6BACC,UAAA,CACA,QAAA,CACA,gBAAA,CAGD,iCACC,iBAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,OAAA,CAIA,4CACC,aAAA,CACA,WAAA,CAIA,gNACC,YAAA",sourcesContent:["\ntd {\n\tposition: relative;\n\n\t.container {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\tmin-height: 36px;\n\t}\n\n\t.content {\n\t\tflex: 1 1 0;\n\t\tmargin: 0;\n\t\tpadding-top: 0.6em;\n\t}\n\n\t.action-item {\n\t\tposition: absolute;\n\t\tright: -48px;\n\t\tflex: 0 1 auto;\n\t\tdisplay: none;\n\t\ttop: 2px;\n\t}\n\n\t&:last-child {\n\t\t.action-item {\n\t\t\tdisplay: block;\n\t\t\topacity: 50%;\n\t\t}\n\n\t\t&:hover, &:active, &:focus, &:focus-within {\n\t\t\t.action-item {\n\t\t\t\topacity: 100%;\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n"],sourceRoot:""}]);const s=r},60052:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,"th .content[data-v-a456a642]{margin:0;padding-top:.75em;flex-grow:1}th .action-item[data-v-a456a642]{opacity:50%}th:hover .action-item[data-v-a456a642],th:active .action-item[data-v-a456a642],th:focus .action-item[data-v-a456a642],th:focus-within .action-item[data-v-a456a642]{opacity:100%}","",{version:3,sources:["webpack://./src/nodes/Table/TableHeaderView.vue"],names:[],mappings:"AAGC,6BACC,QAAA,CACA,iBAAA,CACA,WAAA,CAED,iCACC,WAAA,CAIA,oKACC,YAAA",sourcesContent:["\nth {\n\n\t.content {\n\t\tmargin: 0;\n\t\tpadding-top: 0.75em;\n\t\tflex-grow: 1;\n\t}\n\t.action-item {\n\t\topacity: 50%;\n\t}\n\n\t&:hover, &:active, &:focus, &:focus-within {\n\t\t.action-item {\n\t\t\topacity: 100%;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const s=r},16161:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,".table-wrapper[data-v-048279dc]{position:relative;overflow-x:auto}.clearfix[data-v-048279dc]{clear:both}table[data-v-048279dc]{float:left}.table-settings[data-v-048279dc]{padding-left:3px;opacity:.5;position:absolute;top:0;right:3px}.table-settings[data-v-048279dc]:hover{opacity:1}","",{version:3,sources:["webpack://./src/nodes/Table/TableView.vue"],names:[],mappings:"AACA,gCACC,iBAAA,CACA,eAAA,CAGD,2BACC,UAAA,CAGD,uBACC,UAAA,CAGD,iCACC,gBAAA,CACA,UAAA,CACA,iBAAA,CACA,KAAA,CACA,SAAA,CAEA,uCACC,SAAA",sourcesContent:["\n.table-wrapper {\n\tposition: relative;\n\toverflow-x: auto;\n}\n\n.clearfix {\n\tclear: both;\n}\n\ntable {\n\tfloat: left;\n}\n\n.table-settings {\n\tpadding-left: 3px;\n\topacity: .5;\n\tposition: absolute;\n\ttop: 0;\n\tright: 3px;\n\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n"],sourceRoot:""}]);const s=r},97053:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,"\n.action[data-v-2bcb5cb0] {\n\t/* to unify width of ActionInput and ActionButton */\n\tmin-width: 218px;\n}\n","",{version:3,sources:["webpack://./src/components/Menu/ActionInsertLink.vue"],names:[],mappings:";AAiQA;CACA,mDAAA;CACA,gBAAA;AACA",sourcesContent:["\x3c!--\n  - @copyright Copyright (c) 2022\n  -\n  - @license AGPL-3.0-or-later\n  -\n  - This program is free software: you can redistribute it and/or modify\n  - it under the terms of the GNU Affero General Public License as\n  - published by the Free Software Foundation, either version 3 of the\n  - License, or (at your option) any later version.\n  -\n  - This program is distributed in the hope that it will be useful,\n  - but WITHOUT ANY WARRANTY; without even the implied warranty of\n  - MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n  - GNU Affero General Public License for more details.\n  -\n  - You should have received a copy of the GNU Affero General Public License\n  - along with this program. If not, see <http://www.gnu.org/licenses/>.\n  -\n  --\x3e\n<template>\n\t<NcActions class=\"entry-action entry-action__insert-link\"\n\t\t:title=\"actionEntry.label\"\n\t\t:aria-label=\"actionEntry.label\"\n\t\t:class=\"activeClass\"\n\t\t:container=\"menuIDSelector\"\n\t\t:data-text-action-entry=\"actionEntry.key\"\n\t\t:name=\"actionEntry.label\"\n\t\t:open=\"menuOpen\"\n\t\t@update:open=\"(open) => { menuOpen = menuOpen || open }\">\n\t\t<template #icon>\n\t\t\t<component :is=\"icon\"\n\t\t\t\t:name=\"actionEntry.label\"\n\t\t\t\t:aria-label=\"actionEntry.label\" />\n\t\t</template>\n\t\t<NcActionButton v-if=\"state.active\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-remove`\"\n\t\t\t@click=\"removeLink\">\n\t\t\t<template #icon>\n\t\t\t\t<LinkOff />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Remove link') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton ref=\"buttonFile\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-file`\"\n\t\t\t@click=\"linkFile\">\n\t\t\t<template #icon>\n\t\t\t\t<Document />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to file or folder') }}\n\t\t</NcActionButton>\n\t\t<NcActionInput v-if=\"isInputMode\"\n\t\t\ttype=\"text\"\n\t\t\t:value.sync=\"href\"\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-input`\"\n\t\t\t@submit=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Link to website') }}\n\t\t</NcActionInput>\n\t\t<NcActionButton v-else\n\t\t\t:data-text-action-entry=\"`${actionEntry.key}-website`\"\n\t\t\t@click=\"linkWebsite\">\n\t\t\t<template #icon>\n\t\t\t\t<Web />\n\t\t\t</template>\n\t\t\t{{ state.active ? t('text', 'Update link') : t('text', 'Link to website') }}\n\t\t</NcActionButton>\n\t\t<NcActionButton :data-text-action-entry=\"`${actionEntry.key}-picker`\"\n\t\t\t@click=\"linkPicker\">\n\t\t\t<template #icon>\n\t\t\t\t<Shape />\n\t\t\t</template>\n\t\t\t{{ t('text', 'Open the Smart Picker') }}\n\t\t</NcActionButton>\n\t</NcActions>\n</template>\n\n<script>\nimport { NcActions, NcActionButton, NcActionInput } from '@nextcloud/vue'\nimport { getLinkWithPicker } from '@nextcloud/vue/dist/Components/NcRichText.js'\nimport { FilePickerType, getFilePickerBuilder } from '@nextcloud/dialogs'\n\nimport { getMarkAttributes, isActive } from '@tiptap/core'\n\nimport { Document, Loading, LinkOff, Web, Shape } from '../icons.js'\nimport { BaseActionEntry } from './BaseActionEntry.js'\nimport { optimalPath } from '../../helpers/files.js'\nimport { useFileMixin } from '../Editor.provider.js'\nimport { useMenuIDMixin } from './MenuBar.provider.js'\n\nexport default {\n\tname: 'ActionInsertLink',\n\tcomponents: {\n\t\tNcActions,\n\t\tNcActionButton,\n\t\tNcActionInput,\n\t\tDocument,\n\t\tLoading,\n\t\tLinkOff,\n\t\tWeb,\n\t\tShape,\n\t},\n\textends: BaseActionEntry,\n\tmixins: [\n\t\tuseFileMixin,\n\t\tuseMenuIDMixin,\n\t],\n\tdata: () => {\n\t\treturn {\n\t\t\thref: '',\n\t\t\tisInputMode: false,\n\t\t\tstartPath: null,\n\t\t\t/** Open state of the actions menu */\n\t\t\tmenuOpen: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tactiveClass() {\n\t\t\treturn this.state.active ? 'is-active' : ''\n\t\t},\n\t\trelativePath() {\n\t\t\treturn this.$file?.relativePath ?? '/'\n\t\t},\n\t},\n\tmethods: {\n\t\t/**\n\t\t * Open dialog and ask user which file to link to\n\t\t * Triggered by the \"link file\" button\n\t\t */\n\t\tlinkFile() {\n\t\t\tif (this.startPath === null) {\n\t\t\t\tthis.startPath = this.relativePath.split('/').slice(0, -1).join('/')\n\t\t\t}\n\n\t\t\tconst filePicker = getFilePickerBuilder(t('text', 'Select file or folder to link to'))\n\t\t\t\t.startAt(this.startPath)\n\t\t\t\t.allowDirectories(true)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.setType(FilePickerType.Choose)\n\t\t\t\t.build()\n\n\t\t\tfilePicker.pick()\n\t\t\t\t.then((file) => {\n\t\t\t\t\tconst client = OC.Files.getClient()\n\t\t\t\t\tclient.getFileInfo(file).then((_status, fileInfo) => {\n\t\t\t\t\t\tconst path = optimalPath(this.relativePath, `${fileInfo.path}/${fileInfo.name}`)\n\t\t\t\t\t\tconst encodedPath = path.split('/').map(encodeURIComponent).join('/') + (fileInfo.type === 'dir' ? '/' : '')\n\t\t\t\t\t\tconst href = `${encodedPath}?fileId=${fileInfo.id}`\n\t\t\t\t\t\tthis.setLink(href, fileInfo.name)\n\t\t\t\t\t\tthis.startPath = fileInfo.path + (fileInfo.type === 'dir' ? `/${fileInfo.name}/` : '')\n\t\t\t\t\t})\n\t\t\t\t\tthis.menuOpen = false\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\t// do not close menu but keep focus\n\t\t\t\t\tthis.$refs.buttonFile.$el.focus()\n\t\t\t\t})\n\t\t},\n\t\t/**\n\t\t * Allow user to enter an URL manually\n\t\t * Triggered when by the \"link url\" button\n\t\t *\n\t\t * @param {Event} event Triggering event\n\t\t */\n\t\tlinkWebsite(event) {\n\t\t\tif (event?.type === 'submit') {\n\t\t\t\tconst href = [...event.target.elements].filter(e => e?.type === 'text')[0].value\n\t\t\t\tthis.menuOpen = false\n\t\t\t\tthis.isInputMode = false\n\t\t\t\tthis.href = ''\n\t\t\t\treturn this.setLink(href, href)\n\t\t\t}\n\n\t\t\tif (isActive(this.$editor.state, 'link')) {\n\t\t\t\tconst attrs = getMarkAttributes(this.$editor.state, 'link')\n\t\t\t\tthis.href = attrs.href\n\t\t\t}\n\t\t\tthis.isInputMode = true\n\t\t},\n\t\t/**\n\t\t * Save user entered URL as a link markup\n\t\t * Triggered when the user submits the ActionInput\n\t\t *\n\t\t * @param {string} url href attribute of the link\n\t\t * @param {string} text Text part of the link\n\t\t */\n\t\tsetLink(url, text) {\n\t\t\t// Heuristics for determining if we need a https:// prefix.\n\t\t\tconst noPrefixes = [\n\t\t\t\t/^[a-zA-Z]+:/, // url with protocol (\"mailTo:email@domain.tld\")\n\t\t\t\t/^\\//, // absolute path\n\t\t\t\t/\\?fileId=/, // relative link with fileId\n\t\t\t\t/^\\.\\.?\\//, // relative link starting with ./ or ../\n\t\t\t\t/^[^.]*[/$]/, // no dots before first '/' - not a domain name\n\t\t\t\t/^#/, // url fragment\n\t\t\t]\n\t\t\tif (url && !noPrefixes.find(regex => url.match(regex))) {\n\t\t\t\turl = 'https://' + url\n\t\t\t}\n\n\t\t\t// Avoid issues when parsing urls later on in markdown that might be entered in an invalid format (e.g. \"mailto: example@example.com\")\n\t\t\tconst href = url.replaceAll(' ', '%20')\n\t\t\tconst chain = this.$editor.chain()\n\t\t\t// Check if any text is selected, if not insert the link using the given text property\n\t\t\tif (this.$editor.view.state?.selection.empty) {\n\t\t\t\tchain.insertContent({\n\t\t\t\t\ttype: 'paragraph',\n\t\t\t\t\tcontent: [{\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tmarks: [{\n\t\t\t\t\t\t\ttype: 'link',\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\thref,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}],\n\t\t\t\t\t\ttext,\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tchain.setLink({ href })\n\t\t\t}\n\t\t\tchain.focus().run()\n\t\t},\n\t\t/**\n\t\t * Remove link markup at current position\n\t\t * Triggered by the \"remove link\" button\n\t\t */\n\t\tremoveLink() {\n\t\t\tthis.$editor.chain().unsetLink().focus().run()\n\t\t\tthis.menuOpen = false\n\t\t},\n\t\tlinkPicker() {\n\t\t\tgetLinkWithPicker(null, true)\n\t\t\t\t.then(link => {\n\t\t\t\t\tconst chain = this.$editor.chain()\n\t\t\t\t\tif (this.$editor.view.state?.selection.empty) {\n\t\t\t\t\t\tchain.focus().insertContent(link + ' ').run()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tchain.setLink({ href: link }).focus().run()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error('Smart picker promise rejected', error)\n\t\t\t\t})\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n\t.action {\n\t\t/* to unify width of ActionInput and ActionButton */\n\t\tmin-width: 218px;\n\t}\n</style>\n"],sourceRoot:""}]);const s=r},50580:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(87537),o=n.n(i),a=n(23645),r=n.n(a)()(o());r.push([t.id,"\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false][data-v-297bb5fa] * {\n\t-webkit-user-modify: read-only !important;\n}\n","",{version:3,sources:["webpack://./src/extensions/Mention.vue"],names:[],mappings:";AA8CA,0FAAA;AACA;CACA,yCAAA;AACA",sourcesContent:['<template>\n\t<NodeViewWrapper as="span" class="mention" contenteditable="false">\n\t\t<NcUserBubble :user="node.attrs.id"\n\t\t\t:display-name="username"\n\t\t\t:primary="isCurrentUser"\n\t\t\tclass="mention-user-bubble">\n\t\t\t@{{ username }}\n\t\t</NcUserBubble>\n\t</NodeViewWrapper>\n</template>\n\n<script>\nimport { NcUserBubble } from \'@nextcloud/vue\'\nimport { NodeViewWrapper } from \'@tiptap/vue-2\'\nimport { getCurrentUser } from \'@nextcloud/auth\'\n\nexport default {\n\tname: \'Mention\',\n\tcomponents: {\n\t\tNcUserBubble,\n\t\tNodeViewWrapper,\n\t},\n\tprops: {\n\t\tupdateAttributes: {\n\t\t\ttype: Function,\n\t\t\trequired: true,\n\t\t},\n\n\t\tnode: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tusername: this.node.attrs.label,\n\t\t}\n\t},\n\tcomputed: {\n\t\tisCurrentUser() {\n\t\t\treturn this.node.attrs.id === getCurrentUser()?.uid\n\t\t},\n\t},\n}\n<\/script>\n<style scoped>\n/* This is required to properly render the bubble text (which seems linke a browser bug) */\n.text-editor__wrapper div.ProseMirror .mention[contenteditable=false] :deep(*) {\n\t-webkit-user-modify: read-only !important;\n}\n</style>\n'],sourceRoot:""}]);const s=r},69160:(t,e,n)=>{n.d(e,{Z:()=>T});var i=n(20296),o=n.n(i),a=n(10834),r=n(20629),s=n(31728),l=n(13815);const c={name:"TableOfContents",mixins:[l.Z,s.Cy],data:()=>({initialRender:!0}),computed:{...(0,r.rn)({headings:t=>t.text.headings})},mounted(){setTimeout((()=>{this.initialRender=!1}),1e3)},methods:{goto(t){document.getElementById(t.id).scrollIntoView(),this.$nextTick((()=>{window.location.hash=t.id}))}}};var d=n(93379),u=n.n(d),p=n(7795),A=n.n(p),m=n(90569),h=n.n(m),f=n(3565),g=n.n(f),C=n(19216),v=n.n(C),b=n(44589),x=n.n(b),y=n(35522),w={};w.styleTagTransform=x(),w.setAttributes=g(),w.insert=h().bind(null,"head"),w.domAPI=A(),w.insertStyleElement=v();u()(y.Z,w);y.Z&&y.Z.locals&&y.Z.locals;var _=n(51900);const k=(0,_.Z)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor--toc",class:{"--initial-render":t.initialRender},attrs:{"data-text-el":"editor-table-of-contents"}},[e("ul",{staticClass:"editor--toc__list"},t._l(t.headings,(function(n){return e("li",{key:n.id,staticClass:"editor--toc__item",class:{[`editor--toc__item--${n.level}`]:!0,[`editor--toc__item--previous-${n.previous}`]:n.previous>0},attrs:{"data-toc-level":n.level}},[e("a",{attrs:{href:`#${n.id}`},on:{click:function(e){return e.preventDefault(),t.goto(n)}}},[t._v("\n\t\t\t\t"+t._s(n.text)+"\n\t\t\t")])])})),0)])}),[],!1,null,null,null).exports;var I=n(28612);const B={name:"EditorOutline",components:{Close:n(32318).x8,NcButton:a.P2,TableOfContents:k},mixins:[l.Z,I.vV,I.Ad],data:()=>({mobile:!1}),mounted(){this.$onResize=o()((()=>{this.mobile=this.$el.parentElement.clientWidth<320}),10),this.$resizeObserver=new ResizeObserver(this.$onResize),this.$resizeObserver.observe(this.$el.parentElement),this.$onResize()},beforeDestroy(){this.$resizeObserver.unobserve(this.$el.parentElement),this.$resizeObserver=null,this.$onResize=null}};var S=n(99235),M={};M.styleTagTransform=x(),M.setAttributes=g(),M.insert=h().bind(null,"head"),M.domAPI=A(),M.insertStyleElement=v();u()(S.Z,M);S.Z&&S.Z.locals&&S.Z.locals;const T=(0,_.Z)(B,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor--outline",class:{"editor--outline-mobile":t.mobile},attrs:{"data-text-el":"editor-outline"}},[e("header",{staticClass:"editor--outline__header"},[e("NcButton",{staticClass:"editor--outline__btn-close",attrs:{type:"tertiary","aria-label":t.t("text","Close outline view")},on:{click:t.$outlineActions.toggle},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Close")]},proxy:!0}])}),t._v(" "),e("h2",[t._v(t._s(t.t("text","Outline")))])],1),t._v(" "),e("TableOfContents")],1)}),[],!1,null,"4a57d3b2",null).exports},15039:(t,e,n)=>{n.d(e,{Z:()=>v});var i=n(31352);const o={name:"SuggestionListWrapper",props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data:()=>({selectedIndex:0}),computed:{hasGroups(){return Object.keys(this.itemGroups).includes(void 0)},hasResults(){return this.items.length>0},itemHeight(){return this.$el.scrollHeight/this.items.length},itemInsideScrollView(){return this.selectedIndex*this.itemHeight>=this.$el.scrollTop&&(this.selectedIndex+1)*this.itemHeight<=this.$el.scrollTop+this.$el.clientHeight},itemGroups(){const t={};return this.items.forEach((e=>{t[e.suggestGroup]||(t[e.suggestGroup]=[]),t[e.suggestGroup].push(e)})),t},combineIndex(){return(t,e)=>Object.values(this.itemGroups).slice(0,t).reduce(((t,e)=>t+e.length),0)+e}},watch:{items(){this.selectedIndex=0,this.$el.scrollTop=0}},methods:{t:i.Iu,onKeyDown(t){let{event:e}=t;return!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&("ArrowUp"===e.key?(this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=this.selectedIndex*this.itemHeight),!0):"ArrowDown"===e.key?(this.selectedIndex=(this.selectedIndex+1)%this.items.length,this.itemInsideScrollView||(this.$el.scrollTop=(this.selectedIndex+1)*this.itemHeight-this.$el.clientHeight),!0):("Enter"===e.key||"Tab"===e.key)&&(this.selectItem(this.selectedIndex),!0))},selectItem(t){const e=this.items[t];e&&(this.$emit("select",e),this.command(e))}}};var a=n(93379),r=n.n(a),s=n(7795),l=n.n(s),c=n(90569),d=n.n(c),u=n(3565),p=n.n(u),A=n(19216),m=n.n(A),h=n(44589),f=n.n(h),g=n(37115),C={};C.styleTagTransform=f(),C.setAttributes=p(),C.insert=d().bind(null,"head"),C.domAPI=l(),C.insertStyleElement=m();r()(g.Z,C);g.Z&&g.Z.locals&&g.Z.locals;const v=(0,n(51900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"suggestion-list"},[t.hasResults?t._l(t.itemGroups,(function(n,i,o){return e("div",{key:i},[t.hasGroups?e("div",{staticClass:"suggestion-list__group"},[t._v("\n\t\t\t\t"+t._s(i)+"\n\t\t\t")]):t._e(),t._v(" "),t._l(n,(function(n,i){return e("div",{key:t.combineIndex(o,i),staticClass:"suggestion-list__item",class:{"is-selected":t.combineIndex(o,i)===t.selectedIndex},on:{click:function(e){t.selectItem(t.combineIndex(o,i))}}},[t._t("default",null,{item:n,active:t.combineIndex(o,i)===t.selectedIndex})],2)}))],2)})):e("div",{staticClass:"suggestion-list__item is-empty"},[t._v("\n\t\t"+t._s(t.t("text","No suggestion found"))+"\n\t")])],2)}),[],!1,null,"721c3a10",null).exports},17704:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M15.4%2016.6L10.8%2012l4.6-4.6L14%206l-6%206%206%206%201.4-1.4z%27/%3e%3c/svg%3e"},21568:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M18.4%207.4L17%206l-6%206%206%206%201.4-1.4-4.6-4.6%204.6-4.6m-6%200L11%206l-6%206%206%206%201.4-1.4L7.8%2012l4.6-4.6z%27/%3e%3c/svg%3e"},43413:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M5.6%207.4L7%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6m6%200L13%206l6%206-6%206-1.4-1.4%204.6-4.6-4.6-4.6z%27/%3e%3c/svg%3e"},79193:t=>{t.exports="data:image/svg+xml,%3c%21--%20-%20SPDX-FileCopyrightText:%202020%20Google%20Inc.%20-%20SPDX-License-Identifier:%20Apache-2.0%20--%3e%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20width=%2724%27%20height=%2724%27%20fill=%27%23222%27%3e%3cpath%20d=%27M8.6%2016.6l4.6-4.6-4.6-4.6L10%206l6%206-6%206-1.4-1.4z%27/%3e%3c/svg%3e"},69521:(t,e,n)=>{t.exports=n.p+"8ef4fd4b0bf5c12e8887.svg"}}]);
//# sourceMappingURL=src_extensions_index_js-src_components_Editor_EditorOutline_vue-data_image_svg_xml_3c_21--_20-ee52b2.js.map?v=bd4dc6522eb29fa6f056